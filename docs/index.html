<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#ffffff" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="description"
    content="Printer Calculator is a lightweight App that lets you perform calculations and instantly print results using a thermal printer.\n\nThe app is itself a Progressive Web App which means it can be installed to the home screen of your mobile device or to your desktop." />
  <title>PWA Calculator</title>
  <link rel="manifest" href="manifest.json" />
  <!-- <meta name="color-scheme" content="light dark" /> -->
  <link rel="icon" href="assets/images/icon.192.png" type="image/png" />
  <link rel="apple-touch-icon" href="assets/images/icon.512.png" />
  <script>
    if ('serviceWorker' in navigator) {
      (async () => {
        try {
          const registration = await navigator.serviceWorker.register('./sw.js', {
            type: 'module',
            scope: './',
            updateViaCache: 'imports'
          });
          if (registration.installing) {
            console.log("Service worker installing");
          } else if (registration.waiting) {
            console.log("Service worker installed");
          } else if (registration.active) {
            console.log("Service worker active");
          }

          if (!navigator.serviceWorker.controller) {
            console.log('SW registered but not controlling â€” reloading...');
            location.reload();
          }
        }
        catch (error) {
          console.error(`Registration failed with ${error}`);
        }
      })();
    }
    document.addEventListener('DOMContentLoaded', () => {
      const style = document.createElement('link');
      style.rel = 'stylesheet';
      style.href = `./index.css?sw=${Date.now()}`;
      style.async = true;
      document.head.appendChild(style);

      const script = document.createElement('script');
      script.src = `./index.js?sw=${Date.now()}`;
      script.type = 'module';
      script.async = true;
      document.body.appendChild(script);
    });
  </script>
  <script>
    document.addEventListener('gesturestart', (e) => e.preventDefault());
    document.addEventListener('gesturechange', (e) => e.preventDefault());
    document.addEventListener('gestureend', (e) => e.preventDefault());
  </script>
</head>

<body>
  <div id="app" style="overflow:hidden"></div>
</body>

</html>