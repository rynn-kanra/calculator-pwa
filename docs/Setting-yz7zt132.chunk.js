import{a as $,b as f}from"./index-185yf476.chunk.js";import{d as M,e as z}from"./index-m3m0bh4b.chunk.js";import{j as q,o as G}from"./index-str48khc.chunk.js";import{t as L}from"./index-7y7s07d5.chunk.js";import{w as h}from"./index-6hr1r7bk.chunk.js";import"./index-cf9dvks9.chunk.js";import"./index-d5ey5pt3.chunk.js";import{Q as g}from"./index-sqv70b12.chunk.js";import{$ as t,V as W,aa as Z,ca as jsxDEV,ea as U}from"./index-nq6yem3r.chunk.js";import{ga as X,ia as _}from"./index-zkqt6zvr.chunk.js";import"./index-m6gkxxm7.chunk.js";import"./index-sw83f574.chunk.js";function Q({tabs:l,initialIndex:w}){let[c,K]=t(w||0);return jsxDEV("div",{children:[jsxDEV("div",{class:"no-scroll-ui",style:{display:"flex",borderBottom:"1px solid #4caf50",overflowX:"auto"},children:l.map((u,m)=>jsxDEV("button",{onClick:()=>K(m),style:{padding:"0.5rem 1rem",border:"none",borderBottom:c===m?"3px solid #4caf50":"3px solid transparent",background:"none",cursor:"pointer",fontWeight:c===m?"bold":"normal"},children:u.title},m,!1,void 0,this))},void 0,!1,void 0,this),jsxDEV("div",{style:{padding:"1rem 0"},children:l.map((u,m)=>jsxDEV("div",{style:{display:c===m?"block":"none"},children:u.content},void 0,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}class N{async register(){try{let l=await f.getRegisterOption(),w=await navigator.credentials.create({publicKey:l});return await f.register(w),!0}catch(l){return!1}}async authenticate(){try{let l=await f.getAuthenticationOption(),w=await navigator.credentials.get({publicKey:l,mediation:"optional"});return await f.authenticate(w),!0}catch(l){return!1}}async isRegistered(){try{return!!(await f.getUser())?.id}catch(l){return!1}}}var s=new N,k=s;class I{async subscribe(){try{let l=await navigator.serviceWorker.getRegistration();if(!l)throw new Error("No service worker");let w=await l.pushManager.permissionState({userVisibleOnly:!0});if(w==="prompt")w=await Notification.requestPermission();if(w==="denied")throw new Error("Permission denied");let c=await l?.pushManager.getSubscription();if(c)return!0;let K=await f.getVAPIDPublic();return c=await l?.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:G(q(K))}),await f.subscribe(c.toJSON()),!0}catch(l){return!1}}async unsubscribe(){try{let l=await navigator.serviceWorker.getRegistration();if(!l)throw new Error("No service worker");let w=await l?.pushManager.getSubscription();if(!w)return!0;let c=await w.unsubscribe();if(c)await f.unsubscribe(w.toJSON());return c}catch(l){return!1}}}var e=new I,Y=e;var J,P=["./workers/ort-wasm-simd-threaded.jsep.wasm"];function V(){let[l,w,c]=U(),[K,u]=t(!0),[m,H]=t(!1),[F,T]=t(!0),[b,x]=t(structuredClone(l)),[v,C]=t([]),[O,A]=t(b?.defaultConfig?.printerType);Z(()=>{let n;if(l.lockSetting)(async()=>{let r=async()=>{return k.authenticate().then((i)=>{if(H(i),!i)document.startViewTransition(()=>g("/"));return i})};if(!await r())return;let B=!1;n=await z.idleEvent(),n.subscribe((i)=>{let y=i.currentTarget;if(y.screenState==="locked"||y.userState==="idle")B=!0,H(!1);else if(B)B=!1,r()})})();else H(!0);switch(Promise.all(P.map((r)=>caches.match(r))).then((r)=>r.every((p)=>!!p)).then((r)=>{T(r)}),l.ocrEngine){case 1:{J=new L;break}case 2:default:{J=new h;break}}return Promise.all(J.depedencies.map((r)=>caches.match(r))).then((r)=>r.every((p)=>!!p)).then((r)=>{u(r)}),()=>{n?.unsubscribe()}},[]);let R=()=>{c(),document.startViewTransition(()=>g("/"))},a=()=>{c(),w(b),document.startViewTransition(()=>g("/"))},S=()=>{c(),$.download("ocr",J.depedencies,{title:"OCR Models",icons:[{sizes:"192x192",src:"./assets/images/icon.192.png",type:"image/png"}],downloadTotal:28103528})},d=()=>{c(),$.download("onnx",P,{title:"ONNX Runtime",icons:[{sizes:"192x192",src:"./assets/images/icon.192.png",type:"image/png"}],downloadTotal:21872216})},o=async()=>{if(c(),await Notification.requestPermission()!=="granted"){alert("Permission denied");return}navigator.serviceWorker.controller?.postMessage({action:"UPDATE:CHECK",params:[!0]})};return Z(()=>{if(!b||!b.defaultConfig)return;let n=[b.defaultConfig].concat(Object.values(b.printerConfig)).map((r,p)=>{let B=r==b.defaultConfig;switch(r.printerType){case"bluetooth":{if(!r.bluetoothOption)r.bluetoothOption={mtu:50,delayTime:0};break}case"usb":{if(!r.usbOption)r.usbOption={};break}case"serial":{if(!r.serialOption)r.serialOption={baudRate:9600,bufferSize:255,dataBits:8,flowControl:"none",stopBits:1};break}}return{title:r.name?.toUpperCase(),content:jsxDEV("div",{style:{flex:1,display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem 0.5rem"},children:[jsxDEV("div",{children:["Tipe printer",r.printerType==="usb"&&jsxDEV("div",{style:{color:"#888",fontSize:"0.8em"},children:"(zadig.exe - change usb driver to WinUSB)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),jsxDEV("div",{children:jsxDEV("select",{class:"form",disabled:!B,value:r.printerType,onInput:(i)=>{r.printerType=i.currentTarget.value,A(r.printerType)},children:Object.entries(X).map(([i,y])=>jsxDEV("option",{value:y,children:i.replaceAll("_"," ")},void 0,!1,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:["Auto konek",r.printerType==="bluetooth"&&jsxDEV("div",{style:{color:"#888",fontSize:"0.8em"},children:"(chrome://flags/#enable-web-bluetooth-new-permissions-backend)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),jsxDEV("div",{class:"input-container",children:jsxDEV("label",{class:"switch",children:[jsxDEV("input",{type:"checkbox",checked:r.autoConnect,onInput:(i)=>{r.autoConnect=i.currentTarget.checked}},void 0,!1,void 0,this),jsxDEV("span",{class:"slider"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Ukuran kertas"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("select",{class:"form",value:r.paperWidth,onInput:(i)=>{r.paperWidth=parseInt(i.currentTarget.value)},children:[58,80].map((i)=>jsxDEV("option",{value:i,children:[i,"mm"]},void 0,!0,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"DPI"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("select",{class:"form",value:r.dpi,onInput:(i)=>{r.dpi=parseInt(i.currentTarget.value)},children:[203,300,600,1200,2400,4800].map((i)=>jsxDEV("option",{value:i,children:i},void 0,!1,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Ukuran huruf"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("input",{class:"form",type:"number",name:"font-size",step:"2",min:"12",max:"72",value:b.defaultConfig.fontSize,onInput:(i)=>{b.defaultConfig.fontSize=parseInt(i.currentTarget.value)}},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Tipe cetakan text"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("select",{class:"form",name:"print-mode",value:r.textAsImage?.toString(),onInput:(i)=>{r.textAsImage=i.currentTarget.value!="false"},children:[jsxDEV("option",{value:"true",children:"Gambar"},void 0,!1,void 0,this),jsxDEV("option",{value:"false",children:"Text"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Tipe cetakan barcode"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("select",{class:"form",name:"print-mode",value:r.barcodeAsImage?.toString(),onInput:(i)=>{r.barcodeAsImage=i.currentTarget.value!="false"},children:[jsxDEV("option",{value:"false",children:"Native"},void 0,!1,void 0,this),jsxDEV("option",{value:"true",children:"Gambar"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Mode cetakan gambar"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("select",{class:"form",name:"image-mode",value:r.image,onInput:(i)=>{r.image=i.currentTarget.value},children:[["Raster Image in RAM (GS 8 L)","ram-rastar"],["Raster Image (GS v 0)","rastar"],["Bit Image (ESC *)","bit"],["Dot Matrix Image (ESC L)","dot-matrix"]].map((i)=>jsxDEV("option",{value:i[1],children:i[0]},void 0,!1,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Berbagi printer"},void 0,!1,void 0,this),jsxDEV("div",{class:"input-container",children:jsxDEV("label",{class:"switch",children:[jsxDEV("input",{type:"checkbox",checked:r.sharePrinter,onInput:(i)=>{r.sharePrinter=i.currentTarget.checked}},void 0,!1,void 0,this),jsxDEV("span",{class:"slider"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),r.printerType=="usb"&&jsxDEV(W,{children:[jsxDEV("div",{style:{gridColumn:"span 2",textTransform:"uppercase",fontWeight:"bold"},children:"Setting USB"},void 0,!1,void 0,this),jsxDEV("div",{children:["VendorId",jsxDEV("div",{style:{color:"#888",fontSize:"0.8em"},children:"(check driver or manual)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),jsxDEV("div",{children:jsxDEV("input",{class:"form",type:"text",name:"vendor",value:r.usbOption.vendorId,onInput:(i)=>{r.usbOption.vendorId=i.currentTarget.value}},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Waktu delay"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("input",{class:"form",type:"number",name:"delay",step:"10",min:"0",max:"1000",value:r.bluetoothOption.delayTime,onInput:(i)=>{r.bluetoothOption.delayTime=Math.max(parseInt(i.currentTarget.value),0)}},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),r.printerType=="bluetooth"&&jsxDEV(W,{children:[jsxDEV("div",{style:{gridColumn:"span 2",textTransform:"uppercase",fontWeight:"bold"},children:"Setting Bluetooth"},void 0,!1,void 0,this),jsxDEV("div",{children:"MTU (Maximum Transmision Unit)"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("input",{class:"form",type:"number",name:"max-digit",step:"10",min:"20",max:"512",value:r.bluetoothOption.mtu,onInput:(i)=>{r.bluetoothOption.mtu=Math.max(parseInt(i.currentTarget.value),20)}},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Waktu delay"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("input",{class:"form",type:"number",name:"delay",step:"10",min:"0",max:"1000",value:r.bluetoothOption.delayTime,onInput:(i)=>{r.bluetoothOption.delayTime=Math.max(parseInt(i.currentTarget.value),0)}},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),r.printerType=="serial"&&jsxDEV(W,{children:[jsxDEV("div",{style:{gridColumn:"span 2",textTransform:"uppercase",fontWeight:"bold"},children:"Setting Serial"},void 0,!1,void 0,this),jsxDEV("div",{children:"Baud Rate"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("select",{class:"form",value:r.serialOption.baudRate,onInput:(i)=>{r.serialOption.baudRate=parseInt(i.currentTarget.value)},children:[9600,19200,38400,57600,115200].map((i)=>jsxDEV("option",{value:i,children:i},void 0,!1,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Data Bits"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("select",{class:"form",value:r.serialOption.dataBits,onInput:(i)=>{r.serialOption.dataBits=parseInt(i.currentTarget.value)},children:[8,7].map((i)=>jsxDEV("option",{value:i,children:i},void 0,!1,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Stop Bits"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("select",{class:"form",value:r.serialOption.stopBits,onInput:(i)=>{r.serialOption.stopBits=parseInt(i.currentTarget.value)},children:[1,2].map((i)=>jsxDEV("option",{value:i,children:i},void 0,!1,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Buffer Size"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("input",{class:"form",type:"number",name:"buffer-size",step:"10",min:"64",max:"2048",value:r.serialOption.bufferSize,onInput:(i)=>{r.serialOption.bufferSize=Math.max(parseInt(i.currentTarget.value),64)}},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Flow Control"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("select",{class:"form",value:r.serialOption.flowControl,onInput:(i)=>{r.serialOption.flowControl=i.currentTarget.value},children:[["none","none"],["hardware","RTS/CTS hardware handshake"]].map(([i,y])=>jsxDEV("option",{value:i,children:y},void 0,!1,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}});C(n)},[b,O]),jsxDEV("div",{style:{height:"100dvh",visibility:m?"":"hidden",fontSize:"1rem",backgroundColor:"#f0f0f0",padding:"1rem 0 0",boxSizing:"border-box",viewTransitionName:"view-scale"},children:[jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"1rem",margin:"0 1rem 1rem 1rem"},children:[jsxDEV("div",{children:jsxDEV("button",{class:"btn-small",style:{color:"slategrey",margin:0},onClick:R,children:"CANCEL"},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("h4",{style:{textAlign:"center",margin:"0"},children:"SETTING"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("button",{class:"btn-small",style:{color:"white",backgroundColor:"#4caf50",borderColor:"#4caf50",margin:0},onClick:a,children:"SAVE"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),jsxDEV("div",{style:{overflow:"auto",height:"calc(100% - 2rem)",padding:"0 1rem 1rem 1rem",boxSizing:"border-box"},children:jsxDEV("div",{style:{flex:1,display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem 0.5rem"},children:[jsxDEV("div",{children:"Maks. desimal"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("input",{class:"form",type:"number",name:"max-decimal",step:"1",min:"0",max:"10",value:b.maxDecimal,onInput:(n)=>{b.maxDecimal=parseInt(n.currentTarget.value)}},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Maks. digit"},void 0,!1,void 0,this),jsxDEV("div",{children:jsxDEV("input",{class:"form",type:"number",name:"max-digit",step:"1",min:"6",max:"15",value:b.maxDigit,onInput:(n)=>{b.maxDigit=parseInt(n.currentTarget.value)}},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{style:{gridColumn:"span 2"},children:["Nama device",jsxDEV("div",{children:jsxDEV("input",{class:"form",type:"text",name:"device-name",placeholder:"contoh: DEVICE #001",value:b.deviceName,onInput:(n)=>{b.deviceName=n.currentTarget.value}},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),jsxDEV("div",{children:"Susanan 0"},void 0,!1,void 0,this),jsxDEV("div",{class:"input-container",children:jsxDEV("select",{class:"form",value:b.layout0,onInput:(n)=>{b.layout0=n.currentTarget.value},children:["0|000|.","0|00|.","0|00|000"].map((n)=>jsxDEV("option",{value:n,children:n},void 0,!1,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Posisi cetakan"},void 0,!1,void 0,this),jsxDEV("div",{class:"input-container",children:jsxDEV("select",{class:"form",value:b.align,onInput:(n)=>{b.align=parseInt(n.currentTarget.value)},children:[jsxDEV("option",{value:0,children:"Kiri"},void 0,!1,void 0,this),jsxDEV("option",{value:1,children:"Tengah"},void 0,!1,void 0,this),jsxDEV("option",{value:2,children:"Kanan"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Cetak operator"},void 0,!1,void 0,this),jsxDEV("div",{class:"input-container",children:jsxDEV("label",{class:"switch",children:[jsxDEV("input",{type:"checkbox",checked:b.printOperator,onInput:(n)=>{b.printOperator=n.currentTarget.checked}},void 0,!1,void 0,this),jsxDEV("span",{class:"slider"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Kunci setting biometrik"},void 0,!1,void 0,this),jsxDEV("div",{class:"input-container",children:jsxDEV("label",{class:"switch",children:[jsxDEV("input",{type:"checkbox",checked:b.lockSetting,onInput:async(n)=>{let r=n.currentTarget;try{if(r.checked){let p=await k.isRegistered();if(!p)p=await k.register();r.checked=p,await IdleDetector.requestPermission()}b.lockSetting=r.checked}catch{b.lockSetting=r.checked=!r.checked}}},void 0,!1,void 0,this),jsxDEV("span",{class:"slider"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Suara ketik"},void 0,!1,void 0,this),jsxDEV("div",{class:"input-container",children:jsxDEV("label",{class:"switch",children:[jsxDEV("input",{type:"checkbox",checked:b.sound,onInput:(n)=>{b.sound=n.currentTarget.checked}},void 0,!1,void 0,this),jsxDEV("span",{class:"slider"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Bergetaran saat ditekan"},void 0,!1,void 0,this),jsxDEV("div",{class:"input-container",children:jsxDEV("label",{class:"switch",children:[jsxDEV("input",{type:"checkbox",checked:b.vibrate,onInput:(n)=>{b.vibrate=n.currentTarget.checked}},void 0,!1,void 0,this),jsxDEV("span",{class:"slider"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"Auto Update"},void 0,!1,void 0,this),jsxDEV("div",{class:"input-container",children:jsxDEV("select",{class:"form",name:"autoUpdate",value:b.autoUpdate,onInput:async(n)=>{try{let r=parseInt(n.currentTarget.value);if(r===1){if(!await Y.subscribe())throw new Error("Permission denied")}b.autoUpdate=r}catch(r){alert(r),n.currentTarget.value=b.autoUpdate.toString()}},children:[jsxDEV("option",{value:0,children:"Silent"},void 0,!1,void 0,this),jsxDEV("option",{value:1,children:"Cek setiap hari"},void 0,!1,void 0,this),jsxDEV("option",{value:2,children:"Manual"},void 0,!1,void 0,this),jsxDEV("option",{value:3,children:"Selalu Online"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{children:"OCR Engine"},void 0,!1,void 0,this),jsxDEV("div",{class:"input-container",children:jsxDEV("select",{class:"form",name:"ocr-engine",value:b.ocrEngine,onInput:(n)=>b.ocrEngine=parseInt(n.currentTarget.value),children:Object.entries(_).filter(([,n])=>n!==0&&typeof n==="number").map(([n,r])=>jsxDEV("option",{value:r,children:n.replaceAll("_"," ").toLocaleUpperCase()},void 0,!1,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this),jsxDEV("div",{style:{gridColumn:"span 2"},children:[jsxDEV("h4",{style:{textAlign:"center",margin:"0 0 1rem 0"},children:"SETTING PRINTER"},void 0,!1,void 0,this),jsxDEV(Q,{tabs:v,initialIndex:Math.max(0,Object.keys(b.printerConfig).indexOf(M.printer?.device?.id||"")+1)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),jsxDEV("div",{style:{gridColumn:"span 2"},children:[jsxDEV("h4",{style:{textAlign:"center",margin:"0 0 1rem 0"},children:"DOWNLOAD"},void 0,!1,void 0,this),jsxDEV("button",{class:"btn",onClick:o,children:"Check Update"},void 0,!1,void 0,this),!F&&jsxDEV("button",{class:"btn",onClick:d,children:"Download ONNX Runtime"},void 0,!1,void 0,this),!K&&jsxDEV("button",{class:"btn",onClick:S,children:"Download OCR Dependencies"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),jsxDEV("div",{style:{gridColumn:"span 2"},children:[jsxDEV("h4",{style:{textAlign:"center",margin:"0 0 1rem 0"},children:"TOOLS"},void 0,!1,void 0,this),jsxDEV("button",{class:"btn",onClick:()=>document.startViewTransition(()=>g("/barcode")),children:"Barcode Scanner"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}export{V as default};
