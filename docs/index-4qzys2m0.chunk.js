import{U as V,W as w,X as S,Z as I,_ as L}from"./index-0pwdr63a.chunk.js";var D={};function P(q,x){for(var z in x)q[z]=x[z];return q}function $(q,x,z){var A,H=/(?:\?([^#]*))?(#.*)?$/,J=q.match(H),B={};if(J&&J[1])for(var N=J[1].split("&"),O=0;O<N.length;O++){var Y=N[O].split("=");B[decodeURIComponent(Y[0])]=decodeURIComponent(Y.slice(1).join("="))}q=T(q.replace(H,"")),x=T(x||"");for(var k=Math.max(q.length,x.length),G=0;G<k;G++)if(x[G]&&x[G].charAt(0)===":"){var Z=x[G].replace(/(^:|[+*?]+$)/g,""),Q=(x[G].match(/[+*?]+$/)||D)[0]||"",_=~Q.indexOf("+"),b=~Q.indexOf("*"),j=q[G]||"";if(!j&&!b&&(Q.indexOf("?")<0||_)){A=!1;break}if(B[Z]=decodeURIComponent(j),_||b){B[Z]=q.slice(G).map(decodeURIComponent).join("/");break}}else if(x[G]!==q[G]){A=!1;break}return(z.default===!0||A!==!1)&&B}function d(q,x){return q.rank<x.rank?1:q.rank>x.rank?-1:q.index-x.index}function g(q,x){return q.index=x,q.rank=function(z){return z.props.default?0:T(z.props.path).map(R).join("")}(q),q.props}function T(q){return q.replace(/(^\/+|\/+$)/g,"").split("/")}function R(q){return q.charAt(0)==":"?1+"*+?".indexOf(q.charAt(q.length-1))||4:5}var l={},K=[],C=[],F=null,M={url:X()},f=L(M);function X(){var q;return""+((q=F&&F.location?F.location:F&&F.getCurrentLocation?F.getCurrentLocation():typeof location<"u"?location:l).pathname||"")+(q.search||"")}function h(q,x){return x===void 0&&(x=!1),typeof q!="string"&&q.url&&(x=q.replace,q=q.url),function(z){for(var A=K.length;A--;)if(K[A].canRoute(z))return!0;return!1}(q)&&function(z,A){A===void 0&&(A="push"),F&&F[A]?F[A](z):typeof history<"u"&&history[A+"State"]&&history[A+"State"](null,null,z)}(q,x?"replace":"push"),W(q)}function W(q){for(var x=!1,z=0;z<K.length;z++)K[z].routeTo(q)&&(x=!0);return x}function y(q){if(q&&q.getAttribute){var x=q.getAttribute("href"),z=q.getAttribute("target");if(x&&x.match(/^\//g)&&(!z||z.match(/^_?self$/i)))return h(x)}}function a(q){return q.stopImmediatePropagation&&q.stopImmediatePropagation(),q.stopPropagation&&q.stopPropagation(),q.preventDefault(),!1}function i(q){if(!(q.ctrlKey||q.metaKey||q.altKey||q.shiftKey||q.button)){var x=q.target;do if(x.localName==="a"&&x.getAttribute("href")){if(x.hasAttribute("data-native")||x.hasAttribute("native"))return;if(y(x))return a(q)}while(x=x.parentNode)}}var E=!1;function e(q){q.history&&(F=q.history),this.state={url:q.url||X()}}P(e.prototype=new w,{shouldComponentUpdate:function(q){return q.static!==!0||q.url!==this.props.url||q.onChange!==this.props.onChange},canRoute:function(q){var x=S(this.props.children);return this.g(x,q)!==void 0},routeTo:function(q){this.setState({url:q});var x=this.canRoute(q);return this.p||this.forceUpdate(),x},componentWillMount:function(){this.p=!0},componentDidMount:function(){var q=this;E||(E=!0,F||addEventListener("popstate",function(){W(X())}),addEventListener("click",i)),K.push(this),F&&(this.u=F.listen(function(x){var z=x.location||x;q.routeTo(""+(z.pathname||"")+(z.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),K.splice(K.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(q,x){q=q.filter(g).sort(d);for(var z=0;z<q.length;z++){var A=q[z],H=$(x,A.props.path,A.props);if(H)return[A,H]}},render:function(q,x){var z,A,H=q.onChange,J=x.url,B=this.c,N=this.g(S(q.children),J);if(N&&(A=I(N[0],P(P({url:J,matches:z=N[1]},z),{key:void 0,ref:void 0}))),J!==(B&&B.url)){P(M,B=this.c={url:J,previous:B&&B.url,current:A,path:A?A.props.path:null,matches:z}),B.router=this,B.active=A?[A]:[];for(var O=C.length;O--;)C[O]({});typeof H=="function"&&H(B)}return V(f.Provider,{value:B},A)}});var s=function(q){return V(q.component,q)};
export{h as Q,e as R,s as S};
