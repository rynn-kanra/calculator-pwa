import{K as C}from"./index-nhk6qqpd.chunk.js";import{L as G}from"./index-92abwxw2.chunk.js";import{$ as P,_ as R,aa as N,ba as jsxDEV,da as V}from"./index-7pmxfjpk.chunk.js";import{ea as I}from"./index-f4qys2qy.chunk.js";import"./index-m6gkxxm7.chunk.js";import"./index-hrp6w3c8.chunk.js";var g="]";var m=(t)=>{return function(r){try{let i={year:0,month:0,day:0},a=0;for(let s in t){let f=s,l=t[f];if(typeof l!=="number")continue;switch(i[f]=parseInt(r.rawValue.substring(a,a+l)||"0"),f){case"year":{if(l<4){let x=new Date().getFullYear(),c=x%100,d=x-c,o=i.year-c;i.year+=d+(o>50?-100:o<=-50?-100:0)}break}case"month":{i[f]-=1;break}case"day":{if(i.day===0)i.month+=1;break}}a+=l}return{value:new Date(i.year,i.month,i.day,i.hour??0,i.minute??0,i.second??0)}}catch{}}},e=(t)=>{return function(r){try{let i=parseInt(r.ai[r.ai.length-1]),a=0,s={};if(t)for(let f in t){let l=t[f];switch(typeof l){case"string":{s[f]=l;break}case"number":{s[f]=r.rawValue.substring(a,a+l),a+=l;break}}}return s.value=parseFloat(`${r.rawValue.substring(a,r.rawValue.length-i)}.${r.rawValue.substring(r.rawValue.length-i)}`),s}catch{}}},O=(t)=>{return function(r){try{let i=0,a={};if(t)for(let s in t){let f=t[s];switch(typeof f){case"string":{a[s]=f;break}case"number":{a[s]=r.rawValue.substring(i,i+f),i+=f;break}}}return a.value=parseInt(r.rawValue.substring(i)),a}catch{}}},T=(t)=>{return function(r){try{let i=0,a={};if(t)for(let f in t){let l=t[f];switch(typeof l){case"string":{a[f]=l;break}case"number":{a[f]=r.rawValue.substring(i,i+l),i+=l;break}}}let s=r.rawValue.substring(i);if(s)a.value=s;return a}catch{}}},H=(t)=>{return function(r){try{let i=parseInt(r.ai[r.ai.length-1]);r.title+=i;let a={sequence:i},s=0;if(t)for(let l in t){let x=t[l];switch(typeof x){case"string":{a[l]=x;break}case"number":{a[l]=r.rawValue.substring(s,s+x),s+=x;break}}}let f=r.rawValue.substring(s);if(f)a.value=f;return a}catch{}}},y=(t)=>{return function(r){try{let i={},a=0;if(t)for(let f in t){let l=t[f];switch(typeof l){case"string":{i[f]=l;break}case"number":{i[f]=r.rawValue.substring(a,a+l),a+=l;break}}}let s=r.rawValue[r.rawValue.length-1]==="-";return i.value=parseInt(r.rawValue.substring(a,r.rawValue.length-+s))*(s?-1:1)/100,i}catch{}}},U=(t)=>{try{let n=m({year:2,month:2,day:2}),r=n({ai:t.ai,title:t.title,rawValue:t.rawValue})?.value,i=void 0;if(t.rawValue.length>6)i=n({ai:t.ai,title:t.title,rawValue:t.rawValue.substring(6)})?.value;return{start:r,end:i}}catch{}},S=(t)=>{try{let n=parseInt(t.rawValue.substring(0,10)),r=parseInt(t.rawValue.substring(10,20));return{long:n/1e7-90,lat:(r/1e7+180)%360-180}}catch{}},p=(t)=>{try{return{value:t.rawValue[0]==="1"}}catch{}},D=(t)=>{try{return{value:t.rawValue.padStart(14,"0")}}catch{}},w={"00":{title:"SSCC",fixed:18},"01":{title:"GTIN",fixed:14,parser:D},"02":{title:"CONTENT",fixed:14,parser:D},"10":{title:"BATCH/LOT",max:20,fnc1:!0},"11":{title:"PROD DATE",fixed:6,parser:m({year:2,month:2,day:2})},"12":{title:"DUE DATE",fixed:6,parser:m({year:2,month:2,day:2})},"13":{title:"PACK DATE",fixed:6,parser:m({year:2,month:2,day:2})},"15":{title:"BEST BEFORE or BEST BY",fixed:6,parser:m({year:2,month:2,day:2})},"16":{title:"SELL BY",fixed:6,parser:m({year:2,month:2,day:2})},"17":{title:"USE BY OR EXPIRY",fixed:6,parser:m({year:2,month:2,day:2})},"20":{title:"VARIANT",fixed:2},"21":{title:"SERIAL",max:20,fnc1:!0},"22":{title:"CPV",max:20,fnc1:!0},"235":{title:"TPX",max:28,fnc1:!0},"240":{title:"ADDITIONAL ID",max:30,fnc1:!0},"241":{title:"CUST. PART NO.",max:30,fnc1:!0},"242":{title:"MTO VARIANT",max:6,fnc1:!0},"243":{title:"PCN",max:20,fnc1:!0},"250":{title:"SECONDARY SERIAL",max:30,fnc1:!0},"251":{title:"REF. TO SOURCE",max:30,fnc1:!0},"253":{title:"GDTI",min:13,max:30,fnc1:!0,parser:T({base:13,serial:17})},"254":{title:"GLN EXTENSION COMPONENT",max:20,fnc1:!0},"255":{title:"GCN",min:13,max:25,fnc1:!0,parser:T({base:13,serial:12})},"30":{title:"VAR. COUNT",max:8,fnc1:!0},"310":{title:"NET WEIGHT (kg)",fixed:6,parser:e({unit:"kg"})},"311":{title:"LENGTH (m)",fixed:6,parser:e({unit:"m"})},"312":{title:"WIDTH (m)",fixed:6,parser:e({unit:"m"})},"313":{title:"HEIGHT (m)",fixed:6,parser:e({unit:"m"})},"314":{title:"AREA (m2)",fixed:6,parser:e({unit:"m2"})},"315":{title:"NET VOLUME (l)",fixed:6,parser:e({unit:"l"})},"316":{title:"NET VOLUME (m3)",fixed:6,parser:e({unit:"m3"})},"320":{title:"NET WEIGHT (lb)",fixed:6,parser:e({unit:"lb"})},"321":{title:"LENGTH (in)",fixed:6,parser:e({unit:"in"})},"322":{title:"LENGTH (ft)",fixed:6,parser:e({unit:"ft"})},"323":{title:"LENGTH (yd)",fixed:6,parser:e({unit:"yd"})},"324":{title:"WIDTH (in)",fixed:6,parser:e({unit:"in"})},"325":{title:"WIDTH (ft)",fixed:6,parser:e({unit:"ft"})},"326":{title:"WIDTH (yd)",fixed:6,parser:e({unit:"yd"})},"327":{title:"HEIGHT (in)",fixed:6,parser:e({unit:"in"})},"328":{title:"HEIGHT (ft)",fixed:6,parser:e({unit:"ft"})},"329":{title:"HEIGHT (yd)",fixed:6,parser:e({unit:"yd"})},"330":{title:"GROSS WEIGHT (kg)",fixed:6,parser:e({unit:"kg"})},"331":{title:"LENGTH (m), log",fixed:6,parser:e({unit:"m"})},"332":{title:"WIDTH (m), log",fixed:6,parser:e({unit:"m"})},"333":{title:"HEIGHT (m), log",fixed:6,parser:e({unit:"m"})},"334":{title:"AREA (m2), log",fixed:6,parser:e({unit:"m2"})},"335":{title:"VOLUME (l), log",fixed:6,parser:e({unit:"l"})},"336":{title:"VOLUME (m3), log",fixed:6,parser:e({unit:"m3"})},"337":{title:"KG PER m2",fixed:6,parser:e({unit:"m2"})},"340":{title:"GROSS WEIGHT (lb)",fixed:6,parser:e({unit:"lb"})},"341":{title:"LENGTH (in), log",fixed:6,parser:e({unit:"in"})},"342":{title:"LENGTH (ft), log",fixed:6,parser:e({unit:"ft"})},"343":{title:"LENGTH (yd), log",fixed:6,parser:e({unit:"yd"})},"344":{title:"WIDTH (in), log",fixed:6,parser:e({unit:"in"})},"345":{title:"WIDTH (ft), log",fixed:6,parser:e({unit:"ft"})},"346":{title:"WIDTH (yd), log",fixed:6,parser:e({unit:"yd"})},"347":{title:"HEIGHT (in), log",fixed:6,parser:e({unit:"in"})},"348":{title:"HEIGHT (ft), log",fixed:6,parser:e({unit:"ft"})},"349":{title:"HEIGHT (yd), log",fixed:6,parser:e({unit:"yd"})},"350":{title:"AREA (in2)",fixed:6,parser:e({unit:"in2"})},"351":{title:"AREA (ft2)",fixed:6,parser:e({unit:"ft2"})},"352":{title:"AREA (yd2)",fixed:6,parser:e({unit:"yd2"})},"353":{title:"AREA (in2), log",fixed:6,parser:e({unit:"in2"})},"354":{title:"AREA (ft2), log",fixed:6,parser:e({unit:"ft2"})},"355":{title:"AREA (yd2), log",fixed:6,parser:e({unit:"yd2"})},"356":{title:"NET WEIGHT (ozt)",fixed:6,parser:e({unit:"ozt"})},"357":{title:"NET VOLUME (oz)",fixed:6,parser:e({unit:"oz"})},"360":{title:"NET VOLUME (qt)",fixed:6,parser:e({unit:"qt"})},"361":{title:"NET VOLUME (gal)",fixed:6,parser:e({unit:"gal"})},"362":{title:"VOLUME (qt), log",fixed:6,parser:e({unit:"qt"})},"363":{title:"VOLUME (gal.), log",fixed:6,parser:e({unit:"gal"})},"364":{title:"VOLUME (in3) ",fixed:6,parser:e({unit:"in3"})},"365":{title:"VOLUME (ft3) ",fixed:6,parser:e({unit:"ft3"})},"366":{title:"VOLUME (yd3) ",fixed:6,parser:e({unit:"yd3"})},"367":{title:"VOLUME (in3), log",fixed:6,parser:e({unit:"in3"})},"368":{title:"VOLUME (ft3), log",fixed:6,parser:e({unit:"ft3"})},"369":{title:"VOLUME (yd3), log",fixed:6,parser:e({unit:"yd3"})},"37":{title:"COUNT",max:8,fnc1:!0,parser:O()},"390":{title:"AMOUNT",max:15,fnc1:!0,parser:e()},"391":{title:"AMOUNT",min:3,max:15,fnc1:!0,parser:e({currency:3})},"392":{title:"PRICE",max:15,fnc1:!0,parser:e()},"393":{title:"PRICE",min:3,max:15,fnc1:!0,parser:e({currency:3})},"394":{title:"PRCNT OFF",fixed:4,fnc1:!0,parser:e()},"395":{title:"PRICE/UoM",fixed:6,fnc1:!0,parser:e()},"400":{title:"ORDER NUMBER",max:30,fnc1:!0},"401":{title:"GINC",max:30,fnc1:!0},"402":{title:"GSIN",fixed:17,fnc1:!0},"403":{title:"ROUTE",max:30,fnc1:!0},"410":{title:"SHIP TO LOC",fixed:13},"411":{title:"BILL TO ",fixed:13},"412":{title:"PURCHASE FROM",fixed:13},"413":{title:"SHIP FOR LOC",fixed:13},"414":{title:"LOC No",fixed:13},"415":{title:"PAY TO",fixed:13},"416":{title:"PROD/SERV LOC",fixed:13},"417":{title:"PARTY",fixed:13},"420":{title:"SHIP TO POST",max:20,fnc1:!0},"421":{title:"SHIP TO POST",min:3,max:12,fnc1:!0,parser:T({country:3})},"422":{title:"ORIGIN",fixed:3,fnc1:!0},"423":{title:"COUNTRY - INITIAL PROCESS.",min:3,max:15,fnc1:!0,parser:T({country:3})},"424":{title:"COUNTRY - PROCESS.",fixed:3,fnc1:!0},"425":{title:"COUNTRY - DISASSEMBLY",min:3,max:15,fnc1:!0,parser:T({country:3})},"426":{title:"COUNTRY - FULL PROCESS",fixed:3,fnc1:!0},"427":{title:"ORIGIN SUBDIVISION",max:3,fnc1:!0},"4300":{title:"SHIP TO COMP",max:35,fnc1:!0},"4301":{title:"SHIP TO NAME",max:35,fnc1:!0},"4302":{title:"SHIP TO ADD1",max:70,fnc1:!0},"4303":{title:"SHIP TO ADD2",max:70,fnc1:!0},"4304":{title:"SHIP TO SUB",max:70,fnc1:!0},"4305":{title:"SHIP TO LOC",max:70,fnc1:!0},"4306":{title:"SHIP TO REG",max:70,fnc1:!0},"4307":{title:"SHIP TO COUNTRY",fixed:2,fnc1:!0},"4308":{title:"SHIP TO PHONE",max:30,fnc1:!0},"4309":{title:"SHIP TO GEO",fixed:20,fnc1:!0,parser:S},"4310":{title:"RTN TO COMP",max:35,fnc1:!0},"4311":{title:"RTN TO NAME",max:35,fnc1:!0},"4312":{title:"RTN TO ADD1",max:70,fnc1:!0},"4313":{title:"RTN TO ADD2",max:70,fnc1:!0},"4314":{title:"RTN TO SUB",max:70,fnc1:!0},"4315":{title:"RTN TO LOC",max:70,fnc1:!0},"4316":{title:"RTN TO REG",max:70,fnc1:!0},"4317":{title:"RTN TO COUNTRY",fixed:2,fnc1:!0},"4318":{title:"RTN TO PHONE",max:30,fnc1:!0},"4319":{title:"RTN TO GEO",fixed:20,fnc1:!0,parser:S},"4320":{title:"SRV DESCRIPTION",max:35,fnc1:!0},"4321":{title:"DANGEROUS GOODS",fixed:1,fnc1:!0,parser:p},"4322":{title:"AUTH LEAVE",fixed:1,fnc1:!0,parser:p},"4323":{title:"SIG REQUIRED",fixed:1,fnc1:!0,parser:p},"4324":{title:"NBEF DEL DT",fixed:10,fnc1:!0,parser:m({year:2,month:2,day:2,hour:2,minute:2})},"4325":{title:"NAFT DEL DT",fixed:10,fnc1:!0,parser:m({year:2,month:2,day:2,hour:2,minute:2})},"4326":{title:"REL DATE",fixed:6,fnc1:!0,parser:m({year:2,month:2,day:2})},"4330":{title:"MAX TEMP F",min:6,max:7,fnc1:!0,parser:y({unit:"째F"})},"4331":{title:"MAX TEMP C",min:6,max:7,fnc1:!0,parser:y({unit:"째C"})},"4332":{title:"MIN TEMP F",min:6,max:7,fnc1:!0,parser:y({unit:"째F"})},"4333":{title:"MIN TEMP C",min:6,max:7,fnc1:!0,parser:y({unit:"째C"})},"7001":{title:"NSN",fixed:13,fnc1:!0,parser:T({classification:4,country:2,sequence:7})},"7002":{title:"MEAT CUT",max:30,fnc1:!0},"7003":{title:"EXPIRY TIME",fixed:10,fnc1:!0,parser:m({year:2,month:2,day:2,hour:2,minute:2})},"7004":{title:"ACTIVE POTENCY",max:4,fnc1:!0},"7005":{title:"CATCH AREA",max:12,fnc1:!0},"7006":{title:"FIRST FREEZE DATE",fixed:6,fnc1:!0,parser:m({year:2,month:2,day:2})},"7007":{title:"HARVEST DATE",min:6,max:12,fnc1:!0,parser:U},"7008":{title:"AQUATIC SPECIES",max:3,fnc1:!0},"7009":{title:"FISHING GEAR TYPE",max:10,fnc1:!0},"7010":{title:"PROD METHOD",max:2,fnc1:!0},"7011":{title:"TEST BY DATE",min:6,max:10,fnc1:!0,parser:m({year:2,month:2,day:2,hour:2,minute:2})},"7020":{title:"REFURB LOT",max:20,fnc1:!0},"7021":{title:"FUNC STAT",max:20,fnc1:!0},"7022":{title:"REV STAT",max:20,fnc1:!0},"7023":{title:"GIAI - ASSEMBLY",max:30,fnc1:!0},"703":{title:"PROCESSOR #",min:3,max:30,fnc1:!0,parser:H({country:2})},"7040":{title:"UIC+EXT",fixed:4,fnc1:!0,parser:T({UIC:2,extension:1,importer:1})},"7041":{title:"UFRGT UNIT TYPE",max:4,fnc1:!0},"710":{title:"NHRN PZN",max:20,fnc1:!0},"711":{title:"NHRN CIP",max:20,fnc1:!0},"712":{title:"NHRN CN",max:20,fnc1:!0},"713":{title:"NHRN DRN",max:20,fnc1:!0},"714":{title:"NHRN AIM",max:20,fnc1:!0},"715":{title:"NHRN NDC",max:20,fnc1:!0},"716":{title:"NHRN AIC",max:20,fnc1:!0},"723":{title:"CERT #",min:2,max:30,fnc1:!0,parser:H({schema:2})},"7240":{title:"PROTOCOL",max:20,fnc1:!0},"7241":{title:"AIDC MEDIA TYPE",fixed:2,fnc1:!0},"7242":{title:"VCN",max:25,fnc1:!0},"7250":{title:"DOB",fixed:8,fnc1:!0,parser:m({year:4,month:2,day:2})},"7251":{title:"DOB TIME",fixed:12,fnc1:!0,parser:m({year:4,month:2,day:2,hour:2,minute:2})},"7252":{title:"BIO SEX",fixed:1,fnc1:!0},"7253":{title:"FAMILY NAME",max:40,fnc1:!0},"7254":{title:"GIVEN NAME",max:40,fnc1:!0},"7255":{title:"SUFFIX",max:10,fnc1:!0},"7256":{title:"FULL NAME",max:90,fnc1:!0},"7257":{title:"PERSON ADDR",max:70,fnc1:!0},"7258":{title:"BIRTH SEQUENCE",fixed:3,fnc1:!0},"7259":{title:"BABY",max:40,fnc1:!0},"8001":{title:"DIMENSIONS",fixed:14,fnc1:!0,parser:T({width:4,length:5,diameter:3,direction:1,splices:1})},"8002":{title:"CMT No",max:20,fnc1:!0},"8003":{title:"GRAI",min:14,max:30,fnc1:!0,parser:T({leadZero:1,base:13,serial:16})},"8004":{title:"GIAI",max:30,fnc1:!0},"8005":{title:"PRICE PER UNIT",fixed:6,fnc1:!0,parser:O()},"8006":{title:"ITIP",fixed:18,fnc1:!0,parser:T({GTIN:14,piece:2,count:2})},"8007":{title:"IBAN",max:34,fnc1:!0},"8008":{title:"PROD TIME",min:8,max:12,fnc1:!0,parser:m({year:2,month:2,day:2,hour:2,minute:2,second:2})},"8009":{title:"OPT SEN",max:50,fnc1:!0},"8010":{title:"CPID",max:30,fnc1:!0},"8011":{title:"CPID SERIAL",max:12,fnc1:!0},"8012":{title:"VERSION",max:20,fnc1:!0},"8013":{title:"GMN",max:25,fnc1:!0},"8014":{title:"MUDI",max:25,fnc1:!0},"8017":{title:"GSRN - PROVIDER",fixed:18,fnc1:!0},"8018":{title:"GSRN - RECIPIENT",fixed:18,fnc1:!0},"8019":{title:"SRIN",max:10,fnc1:!0},"8020":{title:"REF No",max:25,fnc1:!0},"8026":{title:"ITIP CONTENT",fixed:18,fnc1:!0,parser:T({GTIN:14,piece:2,count:2})},"8110":{title:"-",max:70,fnc1:!0},"8111":{title:"POINTS",fixed:4,fnc1:!0,parser:O()},"8112":{title:"-",max:70,fnc1:!0},"8200":{title:"PRODUCT URL",max:70,fnc1:!0},"90":{title:"INTERNAL",max:30,fnc1:!0},"91":{title:"INTERNAL",max:90,fnc1:!0},"92":{title:"INTERNAL",max:90,fnc1:!0},"93":{title:"INTERNAL",max:90,fnc1:!0},"94":{title:"INTERNAL",max:90,fnc1:!0},"95":{title:"INTERNAL",max:90,fnc1:!0},"96":{title:"INTERNAL",max:90,fnc1:!0},"97":{title:"INTERNAL",max:90,fnc1:!0},"98":{title:"INTERNAL",max:90,fnc1:!0},"99":{title:"INTERNAL",max:90,fnc1:!0}};function L(t){let n={value:t};if(!t.startsWith(g))return n;let r=t.substring(0,3);switch(n.value=t.substring(3),n.data={symbology:r[1],modifier:r[2]},n.data.symbology){case"A":{n.data.format="code_39";break}case"C":{n.data.format="code_128";break}case"E":{switch(t.length){case 13:{n.data.format="ean_13";break}case 12:{n.data.format="upc_a";break}case 8:{n.data.format=n.data.modifier==="4"?"ean_8":"upc_e";break}}break}case"F":{n.data.format="codabar";break}case"G":{n.data.format="code_93";break}case"I":{n.data.format="itf";break}case"L":{n.data.format="pdf417";break}case"Q":{n.data.format="qr_code";break}case"d":{n.data.format="data_matrix";break}case"z":{n.data.format="aztec-code";break}}return n}var E=()=>{let t,n,r=new Promise((i,a)=>{t=i,n=a});return r.resolve=t,r.reject=n,r};var B={Enter:`
`,Tab:"\t","Escape:":"\x1B"};class A{#t;#e=!1;constructor(t){this.#t=I(t,{target:document.body,timeout:60,buffer:"",first:0,last:0}),this.keydown=this.keydown.bind(this)}async init(t){this.connect()}async connect(){if(this.#e)return;this.#t.target.addEventListener("keydown",this.keydown),this.#e=!0}async disconnect(){if(!this.#e)return;this.#t.target.removeEventListener("keydown",this.keydown),this.#e=!1,this.#t.defer?.reject("disconnected")}async dispose(){this.disconnect();return}async*[Symbol.asyncIterator](){if(!this.#t.defer)this.#t.defer=E();try{while(!0)yield await this.#t.defer,this.#t.defer=E()}catch{this.#t.defer=void 0}finally{}}keydown(t){if(t.target?.tagName==="INPUT"||t.target.tagName==="TEXTAREA"){this.clear();return}if(t.key==="Clear"&&t.code==="NumLock"){this.clear();return}if(t.ctrlKey&&!this.#t.buffer){this.clear();return}let n=Date.now();if((this.#t.first?n-this.#t.last:0)>this.#t.timeout)this.clear(),this.#t.first=0;if(this.#t.last=n,!this.#t.first)this.#t.first=this.#t.last;else t.stopPropagation(),t.preventDefault();let i=t.key;if(t.key.length===1){if(t.ctrlKey){let a=t.key.toUpperCase().charCodeAt(0)-64;i=String.fromCharCode(a)}else if(t.shiftKey)i=i.toLocaleUpperCase()}else{let a=B[t.key];if(a)i=a;else return}if(this.#t.buffer+=i,i===`
`){let a=void 0,s=this.#t.buffer.substring(0,this.#t.buffer.length-1);while(s.endsWith("\r")||s.endsWith("\t"))s=s.slice(0,-1);let f=L(s);if(f.data)s=f.value,a=f.data.format;this.#t.defer?.resolve({rawValue:this.#t.buffer,value:s,format:a}),this.clear();return}}clear(){this.#t.buffer="",this.#t.first=this.#t.last=0}}class h{#t;#e=!1;constructor(t){this.#t=I(t,{box:{height:100,width:100,x:0,y:0}})}async init(t){if(this.#t.detector)return;if(!("BarcodeDetector"in window))alert("BarcodeDetector is not supported.");this.#t.detector=await new C.canvas.BarcodeScanner;try{this.#t.video.pause();var n=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",zoom:{ideal:1},focusMode:"continuous"}});this.#t.video.srcObject=n}catch(r){}}async connect(){if(this.#e)return;await this.init(),this.#t.video.play(),clearTimeout(this.#t.detectTOId),this.#t.detectAnimateId&&cancelAnimationFrame(this.#t.detectAnimateId),this.#t.detectTOId=setTimeout(()=>{this.#t.detectAnimateId=requestAnimationFrame(()=>this.detectBarcode())},300),this.#e=!0}async disconnect(){if(!this.#e)return;this.#t.video.pause(),clearTimeout(this.#t.detectTOId),this.#t.detectAnimateId&&cancelAnimationFrame(this.#t.detectAnimateId),this.#e=!1}async dispose(){if(this.disconnect(),this.#t.video?.srcObject instanceof MediaStream)this.#t.video.srcObject.getTracks().forEach((t)=>t.stop()),this.#t.video.srcObject=null;this.#t.defer?.reject("disconnected")}async*[Symbol.asyncIterator](){if(!this.#e)return;if(!this.#t.defer)this.#t.defer=E();try{while(!0)yield await this.#t.defer,this.#t.defer=E()}catch{this.#t.defer=void 0}finally{}}async detectBarcode(){try{let t=this.#t.video,n=await createImageBitmap(t);n=G(n,[n]);let r=t.getBoundingClientRect(),i=r.width/r.height,a=await this.#t.detector?.detect(n,this.#t.box,i);if(a?.rawValue)this.#t.defer?.resolve({rawValue:a.rawValue,value:a.rawValue,format:a.format})}catch(t){alert(t)}finally{clearTimeout(this.#t.detectTOId),this.#t.detectAnimateId&&cancelAnimationFrame(this.#t.detectAnimateId),this.#t.detectTOId=setTimeout(()=>{this.#t.detectAnimateId=requestAnimationFrame(()=>this.detectBarcode())},300)}}}var F=()=>{let t=N(null),n=N(null),r=N(null),[i,a]=R(),[s,f]=R(!1),[l,,x]=V(),c={x:0.1,y:0.1,width:0.8,height:0.8},d=0;if(window.innerWidth<window.innerHeight)d=window.innerWidth*c.width,c.height=Math.round(d*100/window.innerHeight)/100,c.y=(1-c.height)/2;else if(window.innerWidth>window.innerHeight)d=window.innerHeight*c.height,c.width=Math.round(d*100/window.innerWidth)/100,c.x=(1-c.width)/2;else d=window.innerWidth*c.width;c.y=c.y*0.5,P(()=>{switch(l.barcodeScannerEngine){case 1:{r.current=new A({target:document.body});break}case 0:default:r.current=new h({video:t.current,box:c})}return r.current.connect().then(()=>{f(!0),(async()=>{for await(let M of r.current)x(),r.current?.disconnect(),a(M),n.current?.showModal(),f(!1)})()}),()=>{r.current?.dispose()}},[]),P(()=>{if(t.current)t.current.addEventListener("pause",function(){this.style.filter="blur(5px)"}),t.current.addEventListener("play",function(){this.style.filter=""})},[t]);let o=()=>{x(),r.current?.connect(),n.current?.close(),f(!0)},u=Math.round(d/10);return jsxDEV("div",{style:{height:"100dvh",width:"100dvw",position:"relative",viewTransitionName:"view-scale"},children:[jsxDEV("video",{ref:t,autoPlay:!0,playsInline:!0,style:{width:"100%",backgroundColor:"black",height:"100%",objectFit:"cover",transition:"filter 0.3s ease"}},void 0,!1,void 0,this),jsxDEV("div",{style:{position:"absolute",background:"rgba(0, 0, 0, 0.4)",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",clipPath:`polygon(
            0% 0%, 100% 0%, 100% 100%, 0% 100%,
            0% 0%,
            ${c.x*100}% ${c.y*100}%, ${c.x*100}% ${(c.y+c.height)*100}%, ${(c.x+c.width)*100}% ${(c.y+c.height)*100}%, ${(c.x+c.width)*100}% ${c.y*100}%, ${c.x*100}% ${c.y*100}%
          )`}},void 0,!1,void 0,this),jsxDEV("div",{style:{position:"absolute",width:`${u}px`,height:`${u}px`,borderWidth:"3px",borderColor:s?"#f44336":"#666",top:`calc(${c.y*100}% - 2px)`,left:`calc(${c.x*100}% - 2px)`,borderStyle:"solid none none solid",transition:"border-color 0.3s ease"}},void 0,!1,void 0,this),jsxDEV("div",{style:{position:"absolute",width:`${u}px`,height:`${u}px`,borderWidth:"3px",borderColor:s?"#f44336":"#666",top:`calc(${c.y*100}% - 2px)`,left:`calc(${(c.x+c.width)*100}% - ${u-3+1}px)`,borderStyle:"solid solid none none",transition:"border-color 0.3s ease"}},void 0,!1,void 0,this),jsxDEV("div",{style:{position:"absolute",width:`${u}px`,height:`${u}px`,borderWidth:"3px",borderColor:s?"#f44336":"#666",top:`calc(${(c.y+c.height)*100}% - ${u-3+1}px)`,left:`calc(${(c.x+c.width)*100}% - ${u-3+1}px)`,borderStyle:"none solid solid none",transition:"border-color 0.3s ease"}},void 0,!1,void 0,this),jsxDEV("div",{style:{position:"absolute",width:`${u}px`,height:`${u}px`,borderWidth:"3px",borderColor:s?"#f44336":"#666",top:`calc(${(c.y+c.height)*100}% - ${u-3+1}px)`,left:`calc(${c.x*100}% - 2px)`,borderStyle:"none none solid solid",transition:"border-color 0.3s ease"}},void 0,!1,void 0,this),jsxDEV("dialog",{ref:n,style:{margin:"0 auto",top:`${(c.y+c.height/4)*100}%`,maxWidth:`${(c.width-0.1)*100}%`},children:[jsxDEV("div",{children:[jsxDEV("p",{style:{margin:0,textTransform:"uppercase"},children:["FORMAT: ",i?.format]},void 0,!0,void 0,this),jsxDEV("p",{style:{margin:0,overflowWrap:"break-word"},children:i?.value},void 0,!1,void 0,this)]},void 0,!0,void 0,this),jsxDEV("div",{style:{textAlign:"right",marginTop:"1rem"},children:jsxDEV("button",{class:"btn-small",style:{color:"white",backgroundColor:"#4caf50",borderColor:"#4caf50",margin:0},onClick:o,children:"CONTINUE"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},yt=F;export{yt as default};
