import{v as a}from"./index-kdxxcm80.chunk.js";class u extends a{_engine;depedencies=[];async init(){if(!("TextDetector"in window))throw new Error("Text detector not supported");this._engine=new TextDetector}async recognize(n){if(!this._engine)await this.init();let r=await this.resize(n),o=await new Promise((e,i)=>{let t=new Image,c=URL.createObjectURL(r);t.onload=()=>{URL.revokeObjectURL(c),e(t)},t.onerror=(g)=>{URL.revokeObjectURL(c),i(g)},t.src=c}),s=await this._engine?.detect(o);return this.parseResult(s)?.join(`
`)||""}parseResult(n,r=10){n=n.toSorted((e,i)=>e.boundingBox.left-i.boundingBox.left).sort((e,i)=>{let t=e.boundingBox.top-i.boundingBox.top;if(Math.abs(t)<=r)return 0;return t});let o=[],s=0;for(let e of n)if(s>e.boundingBox.top)o[o.length-1]+=` ${e.rawValue}`;else s=e.boundingBox.top+e.boundingBox.height-r,o.push(e.rawValue);return o}}
export{u as t};
