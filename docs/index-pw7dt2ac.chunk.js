import{A as PW,B as mW,D as FW,E as jW,F as SW,G as fW,t as IF,u as WW,v as IW,w as eF,y as xW,z as VW}from"./index-59yp0mn7.chunk.js";import{ea as aF,fa as HW,ha as rF}from"./index-j86cbgms.chunk.js";class wW{_swReg;missingFiles(F){return Promise.all(F.map((W)=>caches.match(W).then(($)=>({url:W,cache:$})))).then((W)=>W.filter(($)=>!$.cache).map(($)=>$.url))}async download(F,W,$){if(!this._swReg)this._swReg=await navigator.serviceWorker.ready;if("backgroundFetch"in this._swReg)await this.bgFetchDownload(F,W,$);else{if(await Notification.requestPermission()==="granted"){await this.notificationDownload(F,W,$);return}await this.fetchDownload(W)}}async notifHandler(F,W,$,X){if(!Array.isArray($)||$.length<=0)return;await F.registration.showNotification(X.title??"Download Files",{body:`downloading ${$.length} files...`,icon:X.icons?.map((G)=>G.src)?.[0]});let w=await F.clients.matchAll();try{let G=await caches.open(HW);await Promise.all($.map((B)=>(async()=>{if(!await G.match(B)){let A=await fetch(B);if(A.ok)await G.put(B,A)}})())),await F.registration.showNotification("download completed",{icon:X.icons?.map((B)=>B.src)?.[0]});let q=await F.clients.matchAll();for(let B of q)B.postMessage({type:"DOWNLOAD",status:!0,id:W})}catch(G){for(let q of w)q.postMessage({type:"DOWNLOAD",status:!1,id:W})}}async notificationDownload(F,W,$){W=await this.missingFiles(W),navigator.serviceWorker.controller?.postMessage({action:"BackgroundFeth",params:[F,W,$]})}async fetchDownload(F){return F=await this.missingFiles(F),Promise.all(F.map((W)=>fetch(W)))}async bgFetchDownload(F,W,$){if(!this._swReg)this._swReg=await navigator.serviceWorker.ready;W=await this.missingFiles(W);let X=await this._swReg.backgroundFetch.get(F);if(X)await X.abort();await this._swReg.backgroundFetch.fetch(F,W,$)}}var kW=new wW,N0=kW;var mF;try{mF=new TextDecoder}catch(F){}var K,WF,Y=0;var UW=[],bW=105,yW=57342,hW=57343,GW=57337;var YW=6,XF={},YF=112810000,n=16810000;var jF=UW,SF=0,D={},P,OF,CF=0,NF=0,j,l,m=[],fF=[],h,b,qF,qW={useRecords:!1,mapsAsObjects:!0},UF=!1,_W=2;try{new Function("")}catch(F){_W=1/0}class a{constructor(F){if(F){if((F.keyMap||F._keyMap)&&!F.useRecords)F.useRecords=!1,F.mapsAsObjects=!0;if(F.useRecords===!1&&F.mapsAsObjects===void 0)F.mapsAsObjects=!0;if(F.getStructures)F.getShared=F.getStructures;if(F.getShared&&!F.structures)(F.structures=[]).uninitialized=!0;if(F.keyMap){this.mapKey=new Map;for(let[W,$]of Object.entries(F.keyMap))this.mapKey.set($,W)}}Object.assign(this,F)}decodeKey(F){return this.keyMap?this.mapKey.get(F)||F:F}encodeKey(F){return this.keyMap&&this.keyMap.hasOwnProperty(F)?this.keyMap[F]:F}encodeKeys(F){if(!this._keyMap)return F;let W=new Map;for(let[$,X]of Object.entries(F))W.set(this._keyMap.hasOwnProperty($)?this._keyMap[$]:$,X);return W}decodeKeys(F){if(!this._keyMap||F.constructor.name!="Map")return F;if(!this._mapKey){this._mapKey=new Map;for(let[$,X]of Object.entries(this._keyMap))this._mapKey.set(X,$)}let W={};return F.forEach(($,X)=>W[u(this._mapKey.has(X)?this._mapKey.get(X):X)]=$),W}mapDecode(F,W){let $=this.decode(F);if(this._keyMap)switch($.constructor.name){case"Array":return $.map((X)=>this.decodeKeys(X))}return $}decode(F,W){if(K)return BW(()=>{return zF(),this?this.decode(F,W):a.prototype.decode.call(qW,F,W)});WF=W>-1?W:F.length,Y=0,SF=0,NF=0,OF=null,jF=UW,j=null,K=F;try{b=F.dataView||(F.dataView=new DataView(F.buffer,F.byteOffset,F.byteLength))}catch($){if(K=null,F instanceof Uint8Array)throw $;throw new Error("Source must be a Uint8Array or Buffer but was a "+(F&&typeof F=="object"?F.constructor.name:typeof F))}if(this instanceof a){if(D=this,h=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return P=this.structures,LF();else if(!P||P.length>0)P=[]}else{if(D=qW,!P||P.length>0)P=[];h=null}return LF()}decodeMultiple(F,W){let $,X=0;try{let w=F.length;UF=!0;let G=this?this.decode(F,w):gF.decode(F,w);if(W){if(W(G)===!1)return;while(Y<w)if(X=Y,W(LF())===!1)return}else{$=[G];while(Y<w)X=Y,$.push(LF());return $}}catch(w){throw w.lastPosition=X,w.values=$,w}finally{UF=!1,zF()}}}function LF(){try{let F=E();if(j){if(Y>=j.postBundlePosition){let W=new Error("Unexpected bundle position");throw W.incomplete=!0,W}Y=j.postBundlePosition,j=null}if(Y==WF){if(P=null,K=null,l)l=null}else if(Y>WF){let W=new Error("Unexpected end of CBOR data");throw W.incomplete=!0,W}else if(!UF)throw new Error("Data read, but end of buffer not reached");return F}catch(F){if(zF(),F instanceof RangeError||F.message.startsWith("Unexpected end of buffer"))F.incomplete=!0;throw F}}function E(){let F=K[Y++],W=F>>5;if(F=F&31,F>23)switch(F){case 24:F=K[Y++];break;case 25:if(W==7)return uW();F=b.getUint16(Y),Y+=2;break;case 26:if(W==7){let $=b.getFloat32(Y);if(D.useFloat32>2){let X=MF[(K[Y]&127)<<1|K[Y+1]>>7];return Y+=4,(X*$+($>0?0.5:-0.5)>>0)/X}return Y+=4,$}F=b.getUint32(Y),Y+=4;break;case 27:if(W==7){let $=b.getFloat64(Y);return Y+=8,$}if(W>1){if(b.getUint32(Y)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");F=b.getUint32(Y+4)}else if(D.int64AsNumber)F=b.getUint32(Y)*4294967296,F+=b.getUint32(Y+4);else F=b.getBigUint64(Y);Y+=8;break;case 31:switch(W){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let $=[],X,w=0;while((X=E())!=XF){if(w>=YF)throw new Error(`Array length exceeds ${YF}`);$[w++]=X}return W==4?$:W==3?$.join(""):Buffer.concat($);case 5:let G;if(D.mapsAsObjects){let q={},B=0;if(D.keyMap)while((G=E())!=XF){if(B++>=n)throw new Error(`Property count exceeds ${n}`);q[u(D.decodeKey(G))]=E()}else while((G=E())!=XF){if(B++>=n)throw new Error(`Property count exceeds ${n}`);q[u(G)]=E()}return q}else{if(qF)D.mapsAsObjects=!0,qF=!1;let q=new Map;if(D.keyMap){let B=0;while((G=E())!=XF){if(B++>=n)throw new Error(`Map size exceeds ${n}`);q.set(D.decodeKey(G),E())}}else{let B=0;while((G=E())!=XF){if(B++>=n)throw new Error(`Map size exceeds ${n}`);q.set(G,E())}}return q}case 7:return XF;default:throw new Error("Invalid major type for indefinite length "+W)}default:throw new Error("Unknown token "+F)}switch(W){case 0:return F;case 1:return~F;case 2:return lW(F);case 3:if(NF>=Y)return OF.slice(Y-CF,(Y+=F)-CF);if(NF==0&&WF<140&&F<32){let w=F<16?JW(F):pW(F);if(w!=null)return w}return gW(F);case 4:if(F>=YF)throw new Error(`Array length exceeds ${YF}`);let $=new Array(F);for(let w=0;w<F;w++)$[w]=E();return $;case 5:if(F>=n)throw new Error(`Map size exceeds ${YF}`);if(D.mapsAsObjects){let w={};if(D.keyMap)for(let G=0;G<F;G++)w[u(D.decodeKey(E()))]=E();else for(let G=0;G<F;G++)w[u(E())]=E();return w}else{if(qF)D.mapsAsObjects=!0,qF=!1;let w=new Map;if(D.keyMap)for(let G=0;G<F;G++)w.set(D.decodeKey(E()),E());else for(let G=0;G<F;G++)w.set(E(),E());return w}case 6:if(F>=GW){let w=P[F&8191];if(w){if(!w.read)w.read=vF(w);return w.read()}if(F<65536){if(F==hW){let G=HF(),q=E(),B=E();bF(q,B);let J={};if(D.keyMap)for(let A=2;A<G;A++){let C=D.decodeKey(B[A-2]);J[u(C)]=E()}else for(let A=2;A<G;A++){let C=B[A-2];J[u(C)]=E()}return J}else if(F==yW){let G=HF(),q=E();for(let B=2;B<G;B++)bF(q++,E());return E()}else if(F==GW)return nW();if(D.getShared){if(hF(),w=P[F&8191],w){if(!w.read)w.read=vF(w);return w.read()}}}}let X=m[F];if(X)if(X.handlesRead)return X(E);else return X(E());else{let w=E();for(let G=0;G<fF.length;G++){let q=fF[G](F,w);if(q!==void 0)return q}return new d(w,F)}case 7:switch(F){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let w=(h||FF())[F];if(w!==void 0)return w;throw new Error("Unknown token "+F)}default:if(isNaN(F)){let w=new Error("Unexpected end of CBOR data");throw w.incomplete=!0,w}throw new Error("Unknown CBOR token "+F)}}var NW=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function vF(F){if(!F)throw new Error("Structure is required in record definition");function W(){let $=K[Y++];if($=$&31,$>23)switch($){case 24:$=K[Y++];break;case 25:$=b.getUint16(Y),Y+=2;break;case 26:$=b.getUint32(Y),Y+=4;break;default:throw new Error("Expected array header, but got "+K[Y-1])}let X=this.compiledReader;while(X){if(X.propertyCount===$)return X(E);X=X.next}if(this.slowReads++>=_W){let G=this.length==$?this:this.slice(0,$);if(X=D.keyMap?new Function("r","return {"+G.map((q)=>D.decodeKey(q)).map((q)=>NW.test(q)?u(q)+":r()":"["+JSON.stringify(q)+"]:r()").join(",")+"}"):new Function("r","return {"+G.map((q)=>NW.test(q)?u(q)+":r()":"["+JSON.stringify(q)+"]:r()").join(",")+"}"),this.compiledReader)X.next=this.compiledReader;return X.propertyCount=$,this.compiledReader=X,X(E)}let w={};if(D.keyMap)for(let G=0;G<$;G++)w[u(D.decodeKey(this[G]))]=E();else for(let G=0;G<$;G++)w[u(this[G])]=E();return w}return F.slowReads=0,W}function u(F){if(typeof F==="string")return F==="__proto__"?"__proto_":F;if(typeof F==="number"||typeof F==="boolean"||typeof F==="bigint")return F.toString();if(F==null)return F+"";throw new Error("Invalid property name type "+typeof F)}var gW=kF;function kF(F){let W;if(F<16){if(W=JW(F))return W}if(F>64&&mF)return mF.decode(K.subarray(Y,Y+=F));let $=Y+F,X=[];W="";while(Y<$){let w=K[Y++];if((w&128)===0)X.push(w);else if((w&224)===192){let G=K[Y++]&63;X.push((w&31)<<6|G)}else if((w&240)===224){let G=K[Y++]&63,q=K[Y++]&63;X.push((w&31)<<12|G<<6|q)}else if((w&248)===240){let G=K[Y++]&63,q=K[Y++]&63,B=K[Y++]&63,J=(w&7)<<18|G<<12|q<<6|B;if(J>65535)J-=65536,X.push(J>>>10&1023|55296),J=56320|J&1023;X.push(J)}else X.push(w);if(X.length>=4096)W+=f.apply(String,X),X.length=0}if(X.length>0)W+=f.apply(String,X);return W}var f=String.fromCharCode;function pW(F){let W=Y,$=new Array(F);for(let X=0;X<F;X++){let w=K[Y++];if((w&128)>0){Y=W;return}$[X]=w}return f.apply(String,$)}function JW(F){if(F<4)if(F<2)if(F===0)return"";else{let W=K[Y++];if((W&128)>1){Y-=1;return}return f(W)}else{let W=K[Y++],$=K[Y++];if((W&128)>0||($&128)>0){Y-=2;return}if(F<3)return f(W,$);let X=K[Y++];if((X&128)>0){Y-=3;return}return f(W,$,X)}else{let W=K[Y++],$=K[Y++],X=K[Y++],w=K[Y++];if((W&128)>0||($&128)>0||(X&128)>0||(w&128)>0){Y-=4;return}if(F<6)if(F===4)return f(W,$,X,w);else{let G=K[Y++];if((G&128)>0){Y-=5;return}return f(W,$,X,w,G)}else if(F<8){let G=K[Y++],q=K[Y++];if((G&128)>0||(q&128)>0){Y-=6;return}if(F<7)return f(W,$,X,w,G,q);let B=K[Y++];if((B&128)>0){Y-=7;return}return f(W,$,X,w,G,q,B)}else{let G=K[Y++],q=K[Y++],B=K[Y++],J=K[Y++];if((G&128)>0||(q&128)>0||(B&128)>0||(J&128)>0){Y-=8;return}if(F<10)if(F===8)return f(W,$,X,w,G,q,B,J);else{let A=K[Y++];if((A&128)>0){Y-=9;return}return f(W,$,X,w,G,q,B,J,A)}else if(F<12){let A=K[Y++],C=K[Y++];if((A&128)>0||(C&128)>0){Y-=10;return}if(F<11)return f(W,$,X,w,G,q,B,J,A,C);let x=K[Y++];if((x&128)>0){Y-=11;return}return f(W,$,X,w,G,q,B,J,A,C,x)}else{let A=K[Y++],C=K[Y++],x=K[Y++],v=K[Y++];if((A&128)>0||(C&128)>0||(x&128)>0||(v&128)>0){Y-=12;return}if(F<14)if(F===12)return f(W,$,X,w,G,q,B,J,A,C,x,v);else{let k=K[Y++];if((k&128)>0){Y-=13;return}return f(W,$,X,w,G,q,B,J,A,C,x,v,k)}else{let k=K[Y++],p=K[Y++];if((k&128)>0||(p&128)>0){Y-=14;return}if(F<15)return f(W,$,X,w,G,q,B,J,A,C,x,v,k,p);let y=K[Y++];if((y&128)>0){Y-=15;return}return f(W,$,X,w,G,q,B,J,A,C,x,v,k,p,y)}}}}}function lW(F){return D.copyBuffers?Uint8Array.prototype.slice.call(K,Y,Y+=F):K.subarray(Y,Y+=F)}var KW=new Float32Array(1),BF=new Uint8Array(KW.buffer,0,4);function uW(){let F=K[Y++],W=K[Y++],$=(F&127)>>2;if($===31){if(W||F&3)return NaN;return F&128?-1/0:1/0}if($===0){let X=((F&3)<<8|W)/16777216;return F&128?-X:X}return BF[3]=F&128|($>>1)+56,BF[2]=(F&7)<<5|W>>3,BF[1]=W<<5,BF[0]=0,KW[0]}var U0=new Array(4096);class d{constructor(F,W){this.value=F,this.tag=W}}m[0]=(F)=>{return new Date(F)};m[1]=(F)=>{return new Date(Math.round(F*1000))};m[2]=(F)=>{let W=BigInt(0);for(let $=0,X=F.byteLength;$<X;$++)W=BigInt(F[$])+(W<<BigInt(8));return W};m[3]=(F)=>{return BigInt(-1)-m[2](F)};m[4]=(F)=>{return+(F[1]+"e"+F[0])};m[5]=(F)=>{return F[1]*Math.exp(F[0]*Math.log(2))};var bF=(F,W)=>{F=F-57344;let $=P[F];if($&&$.isShared)(P.restoreStructures||(P.restoreStructures=[]))[F]=$;P[F]=W,W.read=vF(W)};m[bW]=(F)=>{let W=F.length,$=F[1];bF(F[0],$);let X={};for(let w=2;w<W;w++){let G=$[w-2];X[u(G)]=F[w]}return X};m[14]=(F)=>{if(j)return j[0].slice(j.position0,j.position0+=F);return new d(F,14)};m[15]=(F)=>{if(j)return j[1].slice(j.position1,j.position1+=F);return new d(F,15)};var dW={Error,RegExp};m[27]=(F)=>{return(dW[F[0]]||Error)(F[1],F[2])};var LW=(F)=>{if(K[Y++]!=132){let $=new Error("Packed values structure must be followed by a 4 element array");if(K.length<Y)$.incomplete=!0;throw $}let W=F();if(!W||!W.length){let $=new Error("Packed values structure must be followed by a 4 element array");throw $.incomplete=!0,$}return h=h?W.concat(h.slice(W.length)):W,h.prefixes=F(),h.suffixes=F(),F()};LW.handlesRead=!0;m[51]=LW;m[YW]=(F)=>{if(!h)if(D.getShared)hF();else return new d(F,YW);if(typeof F=="number")return h[16+(F>=0?2*F:-2*F-1)];let W=new Error("No support for non-integer packed references yet");if(F===void 0)W.incomplete=!0;throw W};m[28]=(F)=>{if(!l)l=new Map,l.id=0;let W=l.id++,$=Y,X=K[Y],w;if(X>>5==4)w=[];else w={};let G={target:w};l.set(W,G);let q=F();if(G.used){if(Object.getPrototypeOf(w)!==Object.getPrototypeOf(q))Y=$,w=q,l.set(W,{target:w}),q=F();return Object.assign(w,q)}return G.target=q,q};m[28].handlesRead=!0;m[29]=(F)=>{let W=l.get(F);return W.used=!0,W.target};m[258]=(F)=>new Set(F);(m[259]=(F)=>{if(D.mapsAsObjects)D.mapsAsObjects=!1,qF=!0;return F()}).handlesRead=!0;function ZF(F,W){if(typeof F==="string")return F+W;if(F instanceof Array)return F.concat(W);return Object.assign({},F,W)}function FF(){if(!h)if(D.getShared)hF();else throw new Error("No packed values available");return h}var cW=1399353956;fF.push((F,W)=>{if(F>=225&&F<=255)return ZF(FF().prefixes[F-224],W);if(F>=28704&&F<=32767)return ZF(FF().prefixes[F-28672],W);if(F>=1879052288&&F<=2147483647)return ZF(FF().prefixes[F-1879048192],W);if(F>=216&&F<=223)return ZF(W,FF().suffixes[F-216]);if(F>=27647&&F<=28671)return ZF(W,FF().suffixes[F-27639]);if(F>=1811940352&&F<=1879048191)return ZF(W,FF().suffixes[F-1811939328]);if(F==cW)return{packedValues:h,structures:P.slice(0),version:W};if(F==55799)return W});var iW=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,yF=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array=="undefined"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array=="undefined"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],sW=[64,68,69,70,71,72,77,78,79,85,86];for(let F=0;F<yF.length;F++)oW(yF[F],sW[F]);function oW(F,W){let $="get"+F.name.slice(0,-5),X;if(typeof F==="function")X=F.BYTES_PER_ELEMENT;else F=null;for(let w=0;w<2;w++){if(!w&&X==1)continue;let G=X==2?1:X==4?2:X==8?3:0;m[w?W:W-4]=X==1||w==iW?(q)=>{if(!F)throw new Error("Could not find typed array for code "+W);if(!D.copyBuffers){if(X===1||X===2&&!(q.byteOffset&1)||X===4&&!(q.byteOffset&3)||X===8&&!(q.byteOffset&7))return new F(q.buffer,q.byteOffset,q.byteLength>>G)}return new F(Uint8Array.prototype.slice.call(q,0).buffer)}:(q)=>{if(!F)throw new Error("Could not find typed array for code "+W);let B=new DataView(q.buffer,q.byteOffset,q.byteLength),J=q.length>>G,A=new F(J),C=B[$];for(let x=0;x<J;x++)A[x]=C.call(B,x<<G,w);return A}}}function nW(){let F=HF(),W=Y+E();for(let X=2;X<F;X++){let w=HF();Y+=w}let $=Y;return Y=W,j=[kF(HF()),kF(HF())],j.position0=0,j.position1=0,j.postBundlePosition=Y,Y=$,E()}function HF(){let F=K[Y++]&31;if(F>23)switch(F){case 24:F=K[Y++];break;case 25:F=b.getUint16(Y),Y+=2;break;case 26:F=b.getUint32(Y),Y+=4;break}return F}function hF(){if(D.getShared){let F=BW(()=>{return K=null,D.getShared()})||{},W=F.structures||[];if(D.sharedVersion=F.version,h=D.sharedValues=F.packedValues,P===!0)D.structures=P=W;else P.splice.apply(P,[0,W.length].concat(W))}}function BW(F){let W=WF,$=Y,X=SF,w=CF,G=NF,q=OF,B=jF,J=l,A=j,C=new Uint8Array(K.slice(0,WF)),x=P,v=D,k=UF,p=F();return WF=W,Y=$,SF=X,CF=w,NF=G,OF=q,jF=B,l=J,j=A,K=C,UF=k,P=x,D=v,b=new DataView(K.buffer,K.byteOffset,K.byteLength),p}function zF(){K=null,l=null,P=null}var MF=new Array(147);for(let F=0;F<256;F++)MF[F]=+("1e"+Math.floor(45.15-F*0.30103));var gF=new a({useRecords:!1}),RF=gF.decode,aW=gF.decodeMultiple;var AF;try{AF=new TextEncoder}catch(F){}var cF,DW,EF=typeof globalThis==="object"&&globalThis.Buffer,_F=typeof EF!=="undefined",pF=_F?EF.allocUnsafeSlow:Uint8Array,OW=_F?EF:Uint8Array,CW=256,zW=_F?4294967296:2144337920;var lF,Z,V,Q=0,r,S=null,rW=61440,tW=/[\u0080-\uFFFF]/,g=Symbol("record-id");class TF extends a{constructor(F){super(F);this.offset=0;let W,$,X,w,G,q;F=F||{};let B=OW.prototype.utf8Write?function(H,L,N){return Z.utf8Write(H,L,N)}:AF&&AF.encodeInto?function(H,L){return AF.encodeInto(H,Z.subarray(L)).written}:!1,J=this,A=F.structures||F.saveStructures,C=F.maxSharedStructures;if(C==null)C=A?128:0;if(C>8190)throw new Error("Maximum maxSharedStructure is 8190");let x=F.sequential;if(x)C=0;if(!this.structures)this.structures=[];if(this.saveStructures)this.saveShared=this.saveStructures;let v,k,p=F.sharedValues,y;if(p){y=Object.create(null);for(let H=0,L=p.length;H<L;H++)y[p[H]]=H}let o=[],xF=0,KF=0;this.mapEncode=function(H,L){if(this._keyMap&&!this._mapped)switch(H.constructor.name){case"Array":H=H.map((N)=>this.encodeKeys(N));break}return this.encode(H,L)},this.encode=function(H,L){if(!Z)Z=new pF(8192),V=new DataView(Z.buffer,0,8192),Q=0;if(r=Z.length-10,r-Q<2048)Z=new pF(Z.length),V=new DataView(Z.buffer,0,Z.length),r=Z.length-10,Q=0;else if(L===sF)Q=Q+7&2147483640;if($=Q,J.useSelfDescribedHeader)V.setUint32(Q,3654940416),Q+=3;if(q=J.structuredClone?new Map:null,J.bundleStrings&&typeof H!=="string")S=[],S.size=1/0;else S=null;if(X=J.structures,X){if(X.uninitialized){let U=J.getShared()||{};J.structures=X=U.structures||[],J.sharedVersion=U.version;let _=J.sharedValues=U.packedValues;if(_){y={};for(let O=0,z=_.length;O<z;O++)y[_[O]]=O}}let N=X.length;if(N>C&&!x)N=C;if(!X.transitions){X.transitions=Object.create(null);for(let U=0;U<N;U++){let _=X[U];if(!_)continue;let O,z=X.transitions;for(let M=0,R=_.length;M<R;M++){if(z[g]===void 0)z[g]=U;let T=_[M];if(O=z[T],!O)O=z[T]=Object.create(null);z=O}z[g]=U|1048576}}if(!x)X.nextId=N}if(w)w=!1;if(G=X||[],k=y,F.pack){let N=new Map;if(N.values=[],N.encoder=J,N.maxValues=F.maxPrivatePackedValues||(y?16:1/0),N.objectMap=y||!1,N.samplingPackedValues=v,DF(H,N),N.values.length>0){Z[Q++]=216,Z[Q++]=51,i(4);let U=N.values;I(U),i(0),i(0),k=Object.create(y||null);for(let _=0,O=U.length;_<O;_++)k[U[_]]=_}}lF=L&dF;try{if(lF)return;if(I(H),S)RW($,I);if(J.offset=Q,q&&q.idsToInsert){if(Q+=q.idsToInsert.length*2,Q>r)$F(Q);J.offset=Q;let N=W0(Z.subarray($,Q),q.idsToInsert);return q=null,N}if(L&sF)return Z.start=$,Z.end=Q,Z;return Z.subarray($,Q)}finally{if(X){if(KF<10)KF++;if(X.length>C)X.length=C;if(xF>1e4){if(X.transitions=null,KF=0,xF=0,o.length>0)o=[]}else if(o.length>0&&!x){for(let N=0,U=o.length;N<U;N++)o[N][g]=void 0;o=[]}}if(w&&J.saveShared){if(J.structures.length>C)J.structures=J.structures.slice(0,C);let N=Z.subarray($,Q);if(J.updateSharedData()===!1)return J.encode(H);return N}if(L&Z0)Q=$}},this.findCommonStringsToPack=()=>{if(v=new Map,!y)y=Object.create(null);return(H)=>{let L=H&&H.threshold||4,N=this.pack?H.maxPrivatePackedValues||16:0;if(!p)p=this.sharedValues=[];for(let[U,_]of v)if(_.count>L)y[U]=N++,p.push(U),w=!0;while(this.saveShared&&this.updateSharedData()===!1);v=null}};let I=(H)=>{if(Q>r)Z=$F(Q);var L=typeof H,N;if(L==="string"){if(k){let z=k[H];if(z>=0){if(z<16)Z[Q++]=z+224;else if(Z[Q++]=198,z&1)I(15-z>>1);else I(z-16>>1);return}else if(v&&!F.pack){let M=v.get(H);if(M)M.count++;else v.set(H,{count:1})}}let U=H.length;if(S&&U>=4&&U<1024){if((S.size+=U)>rW){let M,R=(S[0]?S[0].length*3+S[1].length:0)+10;if(Q+R>r)Z=$F(Q+R);if(Z[Q++]=217,Z[Q++]=223,Z[Q++]=249,Z[Q++]=S.position?132:130,Z[Q++]=26,M=Q-$,Q+=4,S.position)RW($,I);S=["",""],S.size=0,S.position=M}let z=tW.test(H);S[z?0:1]+=H,Z[Q++]=z?206:207,I(U);return}let _;if(U<32)_=1;else if(U<256)_=2;else if(U<65536)_=3;else _=5;let O=U*3;if(Q+O>r)Z=$F(Q+O);if(U<64||!B){let z,M,R,T=Q+_;for(z=0;z<U;z++)if(M=H.charCodeAt(z),M<128)Z[T++]=M;else if(M<2048)Z[T++]=M>>6|192,Z[T++]=M&63|128;else if((M&64512)===55296&&((R=H.charCodeAt(z+1))&64512)===56320)M=65536+((M&1023)<<10)+(R&1023),z++,Z[T++]=M>>18|240,Z[T++]=M>>12&63|128,Z[T++]=M>>6&63|128,Z[T++]=M&63|128;else Z[T++]=M>>12|224,Z[T++]=M>>6&63|128,Z[T++]=M&63|128;N=T-Q-_}else N=B(H,Q+_,O);if(N<24)Z[Q++]=96|N;else if(N<256){if(_<2)Z.copyWithin(Q+2,Q+1,Q+1+N);Z[Q++]=120,Z[Q++]=N}else if(N<65536){if(_<3)Z.copyWithin(Q+3,Q+2,Q+2+N);Z[Q++]=121,Z[Q++]=N>>8,Z[Q++]=N&255}else{if(_<5)Z.copyWithin(Q+5,Q+3,Q+3+N);Z[Q++]=122,V.setUint32(Q,N),Q+=4}Q+=N}else if(L==="number")if(!this.alwaysUseFloat&&H>>>0===H)if(H<24)Z[Q++]=H;else if(H<256)Z[Q++]=24,Z[Q++]=H;else if(H<65536)Z[Q++]=25,Z[Q++]=H>>8,Z[Q++]=H&255;else Z[Q++]=26,V.setUint32(Q,H),Q+=4;else if(!this.alwaysUseFloat&&H>>0===H)if(H>=-24)Z[Q++]=31-H;else if(H>=-256)Z[Q++]=56,Z[Q++]=~H;else if(H>=-65536)Z[Q++]=57,V.setUint16(Q,~H),Q+=2;else Z[Q++]=58,V.setUint32(Q,~H),Q+=4;else{let U;if((U=this.useFloat32)>0&&H<4294967296&&H>=-2147483648){Z[Q++]=250,V.setFloat32(Q,H);let _;if(U<4||(_=H*MF[(Z[Q]&127)<<1|Z[Q+1]>>7])>>0===_){Q+=4;return}else Q--}Z[Q++]=251,V.setFloat64(Q,H),Q+=8}else if(L==="object")if(!H)Z[Q++]=246;else{if(q){let _=q.get(H);if(_){if(Z[Q++]=216,Z[Q++]=29,Z[Q++]=25,!_.references){let O=q.idsToInsert||(q.idsToInsert=[]);_.references=[],O.push(_)}_.references.push(Q-$),Q+=2;return}else q.set(H,{offset:Q-$})}let U=H.constructor;if(U===Object)VF(H);else if(U===Array){if(N=H.length,N<24)Z[Q++]=128|N;else i(N);for(let _=0;_<N;_++)I(H[_])}else if(U===Map){if(this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)Z[Q++]=217,Z[Q++]=1,Z[Q++]=3;if(N=H.size,N<24)Z[Q++]=160|N;else if(N<256)Z[Q++]=184,Z[Q++]=N;else if(N<65536)Z[Q++]=185,Z[Q++]=N>>8,Z[Q++]=N&255;else Z[Q++]=186,V.setUint32(Q,N),Q+=4;if(J.keyMap)for(let[_,O]of H)I(J.encodeKey(_)),I(O);else for(let[_,O]of H)I(_),I(O)}else{for(let _=0,O=cF.length;_<O;_++){let z=DW[_];if(H instanceof z){let M=cF[_],R=M.tag;if(R==null)R=M.getTag&&M.getTag.call(this,H);if(R<24)Z[Q++]=192|R;else if(R<256)Z[Q++]=216,Z[Q++]=R;else if(R<65536)Z[Q++]=217,Z[Q++]=R>>8,Z[Q++]=R&255;else if(R>-1)Z[Q++]=218,V.setUint32(Q,R),Q+=4;M.encode.call(this,H,I,$F);return}}if(H[Symbol.iterator]){if(lF){let _=new Error("Iterable should be serialized as iterator");throw _.iteratorNotHandled=!0,_}Z[Q++]=159;for(let _ of H)I(_);Z[Q++]=255;return}if(H[Symbol.asyncIterator]||uF(H)){let _=new Error("Iterable/blob should be serialized as iterator");throw _.iteratorNotHandled=!0,_}if(this.useToJSON&&H.toJSON){let _=H.toJSON();if(_!==H)return I(_)}VF(H)}}else if(L==="boolean")Z[Q++]=H?245:244;else if(L==="bigint"){if(H<BigInt(1)<<BigInt(64)&&H>=0)Z[Q++]=27,V.setBigUint64(Q,H);else if(H>-(BigInt(1)<<BigInt(64))&&H<0)Z[Q++]=59,V.setBigUint64(Q,-H-BigInt(1));else if(this.largeBigIntToFloat)Z[Q++]=251,V.setFloat64(Q,Number(H));else{if(H>=BigInt(0))Z[Q++]=194;else Z[Q++]=195,H=BigInt(-1)-H;let U=[];while(H)U.push(Number(H&BigInt(255))),H>>=BigInt(8);iF(new Uint8Array(U.reverse()),$F);return}Q+=8}else if(L==="undefined")Z[Q++]=247;else throw new Error("Unknown type: "+L)},VF=this.useRecords===!1?this.variableMapSize?(H)=>{let L=Object.keys(H),N=Object.values(H),U=L.length;if(U<24)Z[Q++]=160|U;else if(U<256)Z[Q++]=184,Z[Q++]=U;else if(U<65536)Z[Q++]=185,Z[Q++]=U>>8,Z[Q++]=U&255;else Z[Q++]=186,V.setUint32(Q,U),Q+=4;let _;if(J.keyMap)for(let O=0;O<U;O++)I(J.encodeKey(L[O])),I(N[O]);else for(let O=0;O<U;O++)I(L[O]),I(N[O])}:(H)=>{Z[Q++]=185;let L=Q-$;Q+=2;let N=0;if(J.keyMap){for(let U in H)if(typeof H.hasOwnProperty!=="function"||H.hasOwnProperty(U))I(J.encodeKey(U)),I(H[U]),N++}else for(let U in H)if(typeof H.hasOwnProperty!=="function"||H.hasOwnProperty(U))I(U),I(H[U]),N++;Z[L+++$]=N>>8,Z[L+$]=N&255}:(H,L)=>{let N,U=G.transitions||(G.transitions=Object.create(null)),_=0,O=0,z,M;if(this.keyMap){M=Object.keys(H).map((T)=>this.encodeKey(T)),O=M.length;for(let T=0;T<O;T++){let ZW=M[T];if(N=U[ZW],!N)N=U[ZW]=Object.create(null),_++;U=N}}else for(let T in H)if(typeof H.hasOwnProperty!=="function"||H.hasOwnProperty(T)){if(N=U[T],!N){if(U[g]&1048576)z=U[g]&65535;N=U[T]=Object.create(null),_++}U=N,O++}let R=U[g];if(R!==void 0)R&=65535,Z[Q++]=217,Z[Q++]=R>>8|224,Z[Q++]=R&255;else{if(!M)M=U.__keys__||(U.__keys__=Object.keys(H));if(z===void 0){if(R=G.nextId++,!R)R=0,G.nextId=1;if(R>=CW)G.nextId=(R=C)+1}else R=z;if(G[R]=M,R<C){Z[Q++]=217,Z[Q++]=R>>8|224,Z[Q++]=R&255,U=G.transitions;for(let T=0;T<O;T++){if(U[g]===void 0||U[g]&1048576)U[g]=R;U=U[M[T]]}U[g]=R|1048576,w=!0}else{if(U[g]=R,V.setUint32(Q,3655335680),Q+=3,_)xF+=KF*_;if(o.length>=CW-C)o.shift()[g]=void 0;if(o.push(U),i(O+2),I(57344+R),I(M),L)return;for(let T in H)if(typeof H.hasOwnProperty!=="function"||H.hasOwnProperty(T))I(H[T]);return}}if(O<24)Z[Q++]=128|O;else i(O);if(L)return;for(let T in H)if(typeof H.hasOwnProperty!=="function"||H.hasOwnProperty(T))I(H[T])},$F=(H)=>{let L;if(H>16777216){if(H-$>zW)throw new Error("Encoded buffer would be larger than maximum buffer size");L=Math.min(zW,Math.round(Math.max((H-$)*(H>67108864?1.25:2),4194304)/4096)*4096)}else L=(Math.max(H-$<<2,Z.length-1)>>12)+1<<12;let N=new pF(L);if(V=new DataView(N.buffer,0,L),Z.copy)Z.copy(N,0,$,H);else N.set(Z.slice($,H));return Q-=$,$=0,r=N.length-10,Z=N},e=100,$W=1000;this.encodeAsIterable=function(H,L){return QW(H,L,QF)},this.encodeAsAsyncIterable=function(H,L){return QW(H,L,XW)};function*QF(H,L,N){let U=H.constructor;if(U===Object){let _=J.useRecords!==!1;if(_)VF(H,!0);else MW(Object.keys(H).length,160);for(let O in H){let z=H[O];if(!_)I(O);if(z&&typeof z==="object")if(L[O])yield*QF(z,L[O]);else yield*PF(z,L,O);else I(z)}}else if(U===Array){let _=H.length;i(_);for(let O=0;O<_;O++){let z=H[O];if(z&&(typeof z==="object"||Q-$>e))if(L.element)yield*QF(z,L.element);else yield*PF(z,L,"element");else I(z)}}else if(H[Symbol.iterator]&&!H.buffer){Z[Q++]=159;for(let _ of H)if(_&&(typeof _==="object"||Q-$>e))if(L.element)yield*QF(_,L.element);else yield*PF(_,L,"element");else I(_);Z[Q++]=255}else if(uF(H))MW(H.size,64),yield Z.subarray($,Q),yield H,GF();else if(H[Symbol.asyncIterator])Z[Q++]=159,yield Z.subarray($,Q),yield H,GF(),Z[Q++]=255;else I(H);if(N&&Q>$)yield Z.subarray($,Q);else if(Q-$>e)yield Z.subarray($,Q),GF()}function*PF(H,L,N){let U=Q-$;try{if(I(H),Q-$>e)yield Z.subarray($,Q),GF()}catch(_){if(_.iteratorNotHandled)L[N]={},Q=$+U,yield*QF.call(this,H,L[N]);else throw _}}function GF(){e=$W,J.encode(null,dF)}function QW(H,L,N){if(L&&L.chunkThreshold)e=$W=L.chunkThreshold;else e=100;if(H&&typeof H==="object")return J.encode(null,dF),N(H,J.iterateProperties||(J.iterateProperties={}),!0);return[J.encode(H)]}async function*XW(H,L){for(let N of QF(H,L,!0)){let U=N.constructor;if(U===OW||U===Uint8Array)yield N;else if(uF(N)){let _=N.stream().getReader(),O;while(!(O=await _.read()).done)yield O.value}else if(N[Symbol.asyncIterator])for await(let _ of N)if(GF(),_)yield*XW(_,L.async||(L.async={}));else yield J.encode(_);else yield N}}}useBuffer(F){Z=F,V=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),Q=0}clearSharedData(){if(this.structures)this.structures=[];if(this.sharedValues)this.sharedValues=void 0}updateSharedData(){let F=this.sharedVersion||0;this.sharedVersion=F+1;let W=this.structures.slice(0),$=new oF(W,this.sharedValues,this.sharedVersion),X=this.saveShared($,(w)=>(w&&w.version||0)==F);if(X===!1)$=this.getShared()||{},this.structures=$.structures||[],this.sharedValues=$.packedValues,this.sharedVersion=$.version,this.structures.nextId=this.structures.length;else W.forEach((w,G)=>this.structures[G]=w);return X}}function MW(F,W){if(F<24)Z[Q++]=W|F;else if(F<256)Z[Q++]=W|24,Z[Q++]=F;else if(F<65536)Z[Q++]=W|25,Z[Q++]=F>>8,Z[Q++]=F&255;else Z[Q++]=W|26,V.setUint32(Q,F),Q+=4}class oF{constructor(F,W,$){this.structures=F,this.packedValues=W,this.version=$}}function i(F){if(F<24)Z[Q++]=128|F;else if(F<256)Z[Q++]=152,Z[Q++]=F;else if(F<65536)Z[Q++]=153,Z[Q++]=F>>8,Z[Q++]=F&255;else Z[Q++]=154,V.setUint32(Q,F),Q+=4}var eW=typeof Blob==="undefined"?function(){}:Blob;function uF(F){if(F instanceof eW)return!0;let W=F[Symbol.toStringTag];return W==="Blob"||W==="File"}function DF(F,W){switch(typeof F){case"string":if(F.length>3){if(W.objectMap[F]>-1||W.values.length>=W.maxValues)return;let X=W.get(F);if(X){if(++X.count==2)W.values.push(F)}else if(W.set(F,{count:1}),W.samplingPackedValues){let w=W.samplingPackedValues.get(F);if(w)w.count++;else W.samplingPackedValues.set(F,{count:1})}}break;case"object":if(F)if(F instanceof Array)for(let X=0,w=F.length;X<w;X++)DF(F[X],W);else{let X=!W.encoder.useRecords;for(var $ in F)if(F.hasOwnProperty($)){if(X)DF($,W);DF(F[$],W)}}break;case"function":}}var F0=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;DW=[Date,Set,Error,RegExp,d,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array=="undefined"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array=="undefined"?function(){}:BigInt64Array,Float32Array,Float64Array,oF];cF=[{tag:1,encode(F,W){let $=F.getTime()/1000;if((this.useTimestamp32||F.getMilliseconds()===0)&&$>=0&&$<4294967296)Z[Q++]=26,V.setUint32(Q,$),Q+=4;else Z[Q++]=251,V.setFloat64(Q,$),Q+=8}},{tag:258,encode(F,W){let $=Array.from(F);W($)}},{tag:27,encode(F,W){W([F.name,F.message])}},{tag:27,encode(F,W){W(["RegExp",F.source,F.flags])}},{getTag(F){return F.tag},encode(F,W){W(F.value)}},{encode(F,W,$){iF(F,$)}},{getTag(F){if(F.constructor===Uint8Array){if(this.tagUint8Array||_F&&this.tagUint8Array!==!1)return 64}},encode(F,W,$){iF(F,$)}},c(68,1),c(69,2),c(70,4),c(71,8),c(72,1),c(77,2),c(78,4),c(79,8),c(85,4),c(86,8),{encode(F,W){let $=F.packedValues||[],X=F.structures||[];if($.values.length>0){Z[Q++]=216,Z[Q++]=51,i(4);let w=$.values;W(w),i(0),i(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let G=0,q=w.length;G<q;G++)packedObjectMap[w[G]]=G}if(X){V.setUint32(Q,3655335424),Q+=3;let w=X.slice(0);w.unshift(57344),w.push(new d(F.version,1399353956)),W(w)}else W(new d(F.version,1399353956))}}];function c(F,W){if(!F0&&W>1)F-=4;return{tag:F,encode:function $(X,w){let G=X.byteLength,q=X.byteOffset||0,B=X.buffer||X;w(_F?EF.from(B,q,G):new Uint8Array(B,q,G))}}}function iF(F,W){let $=F.byteLength;if($<24)Z[Q++]=64+$;else if($<256)Z[Q++]=88,Z[Q++]=$;else if($<65536)Z[Q++]=89,Z[Q++]=$>>8,Z[Q++]=$&255;else Z[Q++]=90,V.setUint32(Q,$),Q+=4;if(Q+$>=Z.length)W(Q+$);Z.set(F.buffer?F:new Uint8Array(F),Q),Q+=$}function W0(F,W){let $,X=W.length*2,w=F.length-X;W.sort((G,q)=>G.offset>q.offset?1:-1);for(let G=0;G<W.length;G++){let q=W[G];q.id=G;for(let B of q.references)F[B++]=G>>8,F[B]=G&255}while($=W.pop()){let G=$.offset;F.copyWithin(G+X,G,w),X-=2;let q=G+X;F[q++]=216,F[q++]=28,w=G}return F}function RW(F,W){V.setUint32(S.position+F,Q-S.position-F+1);let $=S;S=null,W($[0]),W($[1])}var nF=new TF({useRecords:!1}),$0=nF.encode,Q0=nF.encodeAsIterable,X0=nF.encodeAsAsyncIterable;var sF=512,Z0=1024,dF=2048;var b0=new rF({name:aF,version:1,upgrade:(F)=>{F.createObjectStore("users",{keyPath:"id"}),F.createObjectStore("subscriptions",{keyPath:"endpoint"})}}),t=new rF({name:aF,version:1,upgrade:(F)=>{F.createObjectStore("users",{keyPath:"id"}),F.createObjectStore("subscriptions",{keyPath:"endpoint"})}});function EW(F,W){return fetch(`https://cors-proxy.blackhaze879.workers.dev/${F}`,W)}var JF="admin@admin",tF=globalThis.location.hostname,TW=globalThis.location.origin,w0={id:WW(JF),name:"admin",displayName:"admin"},s=void 0,wF={subject:"mailto:rynn-kanra@github.io",public:"BFqeYC55FCtAn_Ymu7R9RiC9Cwn-dcJPFpW0JLhCSbQCnd_mfhwPGs2u7hoafCABdlvvH2oP5Wi9tmF75eRUP74",private:"QwXVug4DMGs06_I9U-A4X_764qNHgT2s7BfuKPwXfEQ"};class vW{async getRegisterOption(){return s=new Uint8Array(32),crypto.getRandomValues(s),{challenge:s,rp:{name:"Printer Calculator",id:tF},user:w0,pubKeyCredParams:[{alg:-7,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",requireResidentKey:!1,userVerification:"required"},timeout:50000,attestation:"direct"}}async register(F){let W=IF(F.response.clientDataJSON),$=JSON.parse(W);if($.type!="webauthn.create")throw new Error("mismatch type");if(!$.origin.startsWith(TW))throw new Error("mismatch origin");if(!s||$.challenge!=eF(FW(s)))throw new Error("mismatch challenge");if(!(F.response instanceof AuthenticatorAttestationResponse))throw new Error("invalid response");let X=RF(new Uint8Array(F.response.attestationObject)),w=this.parseAuthData(X.authData);if((w.flags&64)===0)throw new Error("No attested credential data present");await t.set("users",{id:JF,credId:w.credId,publicKey:w.publicKey})}async getAuthenticationOption(){s=new Uint8Array(32),crypto.getRandomValues(s);let F=await t.get("users",JF);return{challenge:s,rpId:tF,allowCredentials:[{id:F.credId,type:"public-key",transports:["usb","ble","nfc","internal","hybrid"]}],userVerification:"required",timeout:50000}}async authenticate(F){let W=IF(F.response.clientDataJSON),$=JSON.parse(W);if($.type!="webauthn.get")throw new Error("mismatch type");if(!$.origin.startsWith(TW))throw new Error("mismatch origin");if(!s||$.challenge!=eF(FW(s)))throw new Error("mismatch challenge");if(!(F.response instanceof AuthenticatorAssertionResponse))throw new Error("invalid response");let X=this.parseAuthData(F.response.authenticatorData),w=new Uint8Array(await crypto.subtle.digest("SHA-256",WW(tF)));if(!PW(X.rpIdHash,w))throw new Error("rpIdHash mismatch");if((X.flags&1)===0)throw new Error("User not present");if((X.flags&4)===0)throw new Error("User not verified");let G=F.response.userHandle?IF(F.response.userHandle):JF,q=await t.get("users",G),B=await crypto.subtle.digest("SHA-256",F.response.clientDataJSON),J=mW(F.response.authenticatorData,B),A=RF(q.publicKey),[C,x]=await IW(A),v=x.name=="ECDSA"?VW(F.response.signature):new Uint8Array(F.response.signature);if(!await crypto.subtle.verify(x,C,v,J))throw new Error("invalid signature")}async getUser(){return await t.get("users",JF)}parseAuthData(F){let W=xW(F),$=new DataView(W.buffer,W.byteOffset,W.byteLength),X=0,w=W.slice(X,X+32);X+=32;let G=$.getUint8(X);X+=1;let q=$.getUint32(X,!1);X+=4;let B=(G&64)!==0,J=void 0,A=void 0,C=void 0;if(B){J=W.slice(X,X+16),X+=16;let x=$.getUint16(X,!1);X+=2,A=W.slice(X,X+x),X+=x,C=W.slice(X)}return{rpIdHash:w,flags:G,signCount:q,aaguid:J,credId:A,publicKey:C}}async getVAPIDPublic(){return wF.public}async subscribe(F){await t.set("subscriptions",JSON.parse(JSON.stringify(F)))}async unsubscribe(F){await t.delete("subscriptions",F.endpoint)}async pushMessage(F){let W=await t.getAll("subscriptions"),[$,X]=await jW(wF.private,wF.public),w=[];for(let G of W){if(!G.endpoint)continue;w.push((async()=>{let q=await SW(G.endpoint,wF.subject,$,X),{body:B,salt:J,serverPublicKeyB64u:A}=await fW(G.keys.p256dh,G.keys.auth,F?.payload),C={"Crypto-Key":`dh=${A}`,TTL:Math.min(F?.ttl||86400,86400).toString(),"Content-Length":B.byteLength.toString()};if(F?.urgency)C.Urgency=F.urgency;if(F?.topic)C.Urgency=F.topic;switch(F?.authMode){case"vapid":{C.Authorization=`vapid t=${q},k=${wF.public}`;break}default:case"webpush":{C.Authorization=`WebPush ${q}`,C["Crypto-Key"]=`${C["Crypto-Key"]};p256ecdsa=${wF.public}`;break}}if(B.byteLength>0)C.Encryption=`salt=${J}`,C["Content-Encoding"]="aesgcm",C["Content-Type"]="application/octet-stream";return await EW(G.endpoint,{method:"POST",headers:C,body:B})})())}return await Promise.all(w)}}var G0=new vW,i0=G0;
export{N0 as p,i0 as q};
